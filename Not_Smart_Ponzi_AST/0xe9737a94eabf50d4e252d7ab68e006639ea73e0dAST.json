{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.5.4"}, {"type": "ContractDefinition", "name": "Account", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "implementation", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "manager", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes4"}, "valueType": {"type": "ElementaryTypeName", "name": "address"}}, "name": "enabled", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "EventDefinition", "name": "EnabledStaticCall", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "module", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "method", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Invoked", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "module", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "target", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "value", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "data", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Received", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "value", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "sender", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "data", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "AccountInit", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ManagerChanged", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "mgr", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "ModifierDefinition", "name": "allowAuthorizedLogicContractsCallsOnly", "parameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "LogicManager"}, "arguments": [{"type": "Identifier", "name": "manager"}], "names": []}, "memberName": "isAuthorized"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}], "names": []}, {"type": "StringLiteral", "value": "not an authorized logic"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "FunctionDefinition", "name": "init", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_manager", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_accountStorage", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_logics", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_keys", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_backups", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "manager"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "Account: account already initialized"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_manager"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "right": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_accountStorage"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}}, {"type": "StringLiteral", "value": "Account: address is null"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "manager"}, "right": {"type": "Identifier", "name": "_manager"}}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_logics"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "logic", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_logics"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "LogicManager"}, "arguments": [{"type": "Identifier", "name": "manager"}], "names": []}, "memberName": "isAuthorized"}, "arguments": [{"type": "Identifier", "name": "logic"}], "names": []}, {"type": "StringLiteral", "value": "must be authorized logic"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "BaseLogic"}, "arguments": [{"type": "Identifier", "name": "logic"}], "names": []}, "memberName": "initAccount"}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "AccountStorage"}, "arguments": [{"type": "Identifier", "name": "_accountStorage"}], "names": []}, "memberName": "initAccount"}, "arguments": [{"type": "Identifier", "name": "this"}, {"type": "Identifier", "name": "_keys"}, {"type": "Identifier", "name": "_backups"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "AccountInit"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "invoke", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_target", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_res", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "success", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "success"}, {"type": "Identifier", "name": "_res"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_target"}, "memberName": "call"}, "memberName": "value"}, "arguments": [{"type": "Identifier", "name": "_value"}], "names": []}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "Identifier", "name": "success"}, {"type": "StringLiteral", "value": "call to target failed"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Invoked"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_target"}, {"type": "Identifier", "name": "_value"}, {"type": "Identifier", "name": "_data"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "enableStaticCall", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_module", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_method", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "enabled"}, "index": {"type": "Identifier", "name": "_method"}}, "right": {"type": "Identifier", "name": "_module"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "EnabledStaticCall"}, "arguments": [{"type": "Identifier", "name": "_module"}, {"type": "Identifier", "name": "_method"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "changeManager", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_newMgr", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_newMgr"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "address cannot be null"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_newMgr"}, "right": {"type": "Identifier", "name": "manager"}}, {"type": "StringLiteral", "value": "already changed"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "manager"}, "right": {"type": "Identifier", "name": "_newMgr"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ManagerChanged"}, "arguments": [{"type": "Identifier", "name": "_newMgr"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "data"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "logic", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "enabled"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sig"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "logic"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Received"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "data"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "LogicManager"}, "arguments": [{"type": "Identifier", "name": "manager"}], "names": []}, "memberName": "isAuthorized"}, "arguments": [{"type": "Identifier", "name": "logic"}], "names": []}, {"type": "StringLiteral", "value": "must be an authorized logic for static call"}], "names": []}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "calldatacopy", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "calldatasize", "arguments": []}]}, {"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "result"}], "expression": {"type": "AssemblyExpression", "functionName": "staticcall", "arguments": [{"type": "AssemblyExpression", "functionName": "gas", "arguments": []}, {"type": "AssemblyExpression", "functionName": "logic", "arguments": []}, {"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "calldatasize", "arguments": []}, {"type": "DecimalNumber", "value": "0"}, {"type": "DecimalNumber", "value": "0"}]}}, {"type": "AssemblyExpression", "functionName": "returndatacopy", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "returndatasize", "arguments": []}]}, {"type": "AssemblySwitch", "expression": {"type": "AssemblyExpression", "functionName": "result", "arguments": []}, "cases": [{"type": "AssemblyCase", "block": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "revert", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "returndatasize", "arguments": []}]}]}, "value": {"type": "DecimalNumber", "value": "0"}}, {"type": "AssemblyCase", "block": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "return", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "returndatasize", "arguments": []}]}]}, "default": true}]}]}}]}}]}, "FalseBody": null}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}], "kind": "contract"}, {"type": "ContractDefinition", "name": "Owned", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "EventDefinition", "name": "OwnerChanged", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_newOwner", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "ModifierDefinition", "name": "onlyOwner", "parameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "owner"}}, {"type": "StringLiteral", "value": "Must be owner"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "owner"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "changeOwner", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_newOwner", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_newOwner"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "Address must not be null"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "owner"}, "right": {"type": "Identifier", "name": "_newOwner"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "OwnerChanged"}, "arguments": [{"type": "Identifier", "name": "_newOwner"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "onlyOwner", "arguments": []}], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "LogicManager", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "Owned"}, "arguments": []}], "subNodes": [{"type": "EventDefinition", "name": "UpdateLogicSubmitted", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "logic", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "UpdateLogicCancelled", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "logic", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "UpdateLogicDone", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "logic", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "StructDefinition", "name": "pending", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "value", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "dueTime", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "bool"}}, "name": "authorized", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "authorizedLogics", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "pending"}}, "name": "pendingLogics", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StructDefinition", "name": "pendingTime", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "curPendingTime", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "nextPendingTime", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "dueTime", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "pendingTime"}, "name": "pt", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "logicCount", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_initialLogics", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_pendingTime", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_initialLogics"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "logic", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_initialLogics"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorized"}, "index": {"type": "Identifier", "name": "logic"}}, "right": {"type": "BooleanLiteral", "value": true}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "logicCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "authorizedLogics"}, "right": {"type": "Identifier", "name": "_initialLogics"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "curPendingTime"}, "right": {"type": "Identifier", "name": "_pendingTime"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "nextPendingTime"}, "right": {"type": "Identifier", "name": "_pendingTime"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "dueTime"}, "right": {"type": "Identifier", "name": "now"}}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "submitUpdatePendingTime", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_pendingTime", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "nextPendingTime"}, "right": {"type": "Identifier", "name": "_pendingTime"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "dueTime"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "curPendingTime"}, "right": {"type": "Identifier", "name": "now"}}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "onlyOwner", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "triggerUpdatePendingTime", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "dueTime"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "too early to trigger updatePendingTime"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "curPendingTime"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "nextPendingTime"}}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "isAuthorized", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_logic", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorized"}, "index": {"type": "Identifier", "name": "_logic"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getAuthorizedLogics", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": null, "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "Identifier", "name": "authorizedLogics"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "submitUpdate", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_logic", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "pending"}, "name": "p", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "pendingLogics"}, "index": {"type": "Identifier", "name": "_logic"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "value"}, "right": {"type": "Identifier", "name": "_value"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "dueTime"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "pt"}, "memberName": "curPendingTime"}}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "UpdateLogicSubmitted"}, "arguments": [{"type": "Identifier", "name": "_logic"}, {"type": "Identifier", "name": "_value"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "onlyOwner", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "cancelUpdate", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_logic", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "pendingLogics"}, "index": {"type": "Identifier", "name": "_logic"}}, "isPrefix": true}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "UpdateLogicCancelled"}, "arguments": [{"type": "Identifier", "name": "_logic"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "onlyOwner", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "triggerUpdateLogic", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_logic", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "pending"}, "name": "p", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "pendingLogics"}, "index": {"type": "Identifier", "name": "_logic"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "dueTime"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "pending logic not found"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "dueTime"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "too early to trigger updateLogic"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "updateLogic"}, "arguments": [{"type": "Identifier", "name": "_logic"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "value"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "pendingLogics"}, "index": {"type": "Identifier", "name": "_logic"}}, "isPrefix": true}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "updateLogic", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_logic", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorized"}, "index": {"type": "Identifier", "name": "_logic"}}, "right": {"type": "Identifier", "name": "_value"}}, "TrueBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "Identifier", "name": "_value"}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "logicCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorized"}, "index": {"type": "Identifier", "name": "_logic"}}, "right": {"type": "BooleanLiteral", "value": true}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "authorizedLogics"}, "memberName": "push"}, "arguments": [{"type": "Identifier", "name": "_logic"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "-=", "left": {"type": "Identifier", "name": "logicCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "logicCount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "must have at least one logic module"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorized"}, "index": {"type": "Identifier", "name": "_logic"}}, "isPrefix": true}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "removeLogic"}, "arguments": [{"type": "Identifier", "name": "_logic"}], "names": []}}]}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "UpdateLogicDone"}, "arguments": [{"type": "Identifier", "name": "_logic"}, {"type": "Identifier", "name": "_value"}], "names": []}}]}, "FalseBody": null}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "removeLogic", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_logic", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "len", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "authorizedLogics"}, "memberName": "length"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "lastLogic", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorizedLogics"}, "index": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "len"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_logic"}, "right": {"type": "Identifier", "name": "lastLogic"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "len"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_logic"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorizedLogics"}, "index": {"type": "Identifier", "name": "i"}}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "authorizedLogics"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "Identifier", "name": "lastLogic"}}}, ";"]}, "FalseBody": null}]}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "--", "subExpression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "authorizedLogics"}, "memberName": "length"}, "isPrefix": false}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "AccountStorage", "baseContracts": [], "subNodes": [{"type": "ModifierDefinition", "name": "allowAccountCallsOnly", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Account"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "StringLiteral", "value": "caller must be account"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "ModifierDefinition", "name": "allowAuthorizedLogicContractsCallsOnly", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "LogicManager"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Account"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}, "memberName": "manager"}, "arguments": [], "names": []}], "names": []}, "memberName": "isAuthorized"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}], "names": []}, {"type": "StringLiteral", "value": "not an authorized logic"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "StructDefinition", "name": "KeyItem", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pubKey", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "status", "storageLocation": null}]}, {"type": "StructDefinition", "name": "BackupAccount", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "effectiveDate", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "expiryDate", "storageLocation": null}]}, {"type": "StructDefinition", "name": "DelayItem", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "dueTime", "storageLocation": null}]}, {"type": "StructDefinition", "name": "Proposal", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "approval", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "uint256"}}, "name": "operationKeyCount", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "uint256"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "KeyItem"}}}, "name": "keyData", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "uint256"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "BackupAccount"}}}, "name": "backupData", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes4"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "DelayItem"}}}, "name": "delayData", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes4"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Proposal"}}}}, "name": "proposalData", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "getOperationKeyCount", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "operationKeyCount"}, "index": {"type": "Identifier", "name": "_account"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "increaseKeyCount", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operationKeyCount"}, "index": {"type": "Identifier", "name": "_account"}}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operationKeyCount"}, "index": {"type": "Identifier", "name": "_account"}}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getKeyData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "KeyItem"}, "name": "item", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "pubKey"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setKeyData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_key", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_key"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "invalid _key value"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "KeyItem"}, "name": "item", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "pubKey"}, "right": {"type": "Identifier", "name": "_key"}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getKeyStatus", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "KeyItem"}, "name": "item", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "status"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setKeyStatus", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_status", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "KeyItem"}, "name": "item", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "status"}, "right": {"type": "Identifier", "name": "_status"}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getBackupAddress", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "BackupAccount"}, "name": "b", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "backup"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getBackupEffectiveDate", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "BackupAccount"}, "name": "b", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "effectiveDate"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getBackupExpiryDate", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "BackupAccount"}, "name": "b", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "expiryDate"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_effective", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_expiry", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "BackupAccount"}, "name": "b", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "backup"}, "right": {"type": "Identifier", "name": "_backup"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "effectiveDate"}, "right": {"type": "Identifier", "name": "_effective"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "expiryDate"}, "right": {"type": "Identifier", "name": "_expiry"}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "setBackupExpiryDate", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_expiry", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "BackupAccount"}, "name": "b", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "expiryDate"}, "right": {"type": "Identifier", "name": "_expiry"}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "clearBackupData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_index"}}, "isPrefix": true}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getDelayDataHash", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "DelayItem"}, "name": "item", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "delayData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_actionId"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "hash"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getDelayDataDueTime", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "DelayItem"}, "name": "item", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "delayData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_actionId"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "dueTime"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setDelayData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_hash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_dueTime", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "DelayItem"}, "name": "item", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "delayData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_actionId"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "hash"}, "right": {"type": "Identifier", "name": "_hash"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "dueTime"}, "right": {"type": "Identifier", "name": "_dueTime"}}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "clearDelayData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "delayData"}, "index": {"type": "Identifier", "name": "_account"}}, "index": {"type": "Identifier", "name": "_actionId"}}, "isPrefix": true}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getProposalDataHash", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Proposal"}, "name": "p", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "proposalData"}, "index": {"type": "Identifier", "name": "_client"}}, "index": {"type": "Identifier", "name": "_proposer"}}, "index": {"type": "Identifier", "name": "_actionId"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "hash"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getProposalDataApproval", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": null, "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Proposal"}, "name": "p", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "proposalData"}, "index": {"type": "Identifier", "name": "_client"}}, "index": {"type": "Identifier", "name": "_proposer"}}, "index": {"type": "Identifier", "name": "_actionId"}}}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "approval"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setProposalData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_hash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_approvedBackup", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Proposal"}, "name": "p", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "proposalData"}, "index": {"type": "Identifier", "name": "_client"}}, "index": {"type": "Identifier", "name": "_proposer"}}, "index": {"type": "Identifier", "name": "_actionId"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "hash"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "hash"}, "right": {"type": "Identifier", "name": "_hash"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "approval"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "approval"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "Identifier", "name": "_approvedBackup"}}, {"type": "StringLiteral", "value": "backup already exists"}], "names": []}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "approval"}, "memberName": "push"}, "arguments": [{"type": "Identifier", "name": "_approvedBackup"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "hash"}, "right": {"type": "Identifier", "name": "_hash"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "approval"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}]}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "hash"}, "right": {"type": "Identifier", "name": "_hash"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "p"}, "memberName": "approval"}, "memberName": "push"}, "arguments": [{"type": "Identifier", "name": "_approvedBackup"}], "names": []}}]}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_client"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "clearProposalData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "proposalData"}, "index": {"type": "Identifier", "name": "_client"}}, "index": {"type": "Identifier", "name": "_proposer"}}, "index": {"type": "Identifier", "name": "_actionId"}}, "isPrefix": true}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAuthorizedLogicContractsCallsOnly", "arguments": [{"type": "Identifier", "name": "_client"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "initAccount", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Account"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_keys", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_backups", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getKeyData"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "AccountStorage: account already initialized!"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_keys"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "empty keys array"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operationKeyCount"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, "right": {"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_keys"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_keys"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "index"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_key", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_keys"}, "index": {"type": "Identifier", "name": "index"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_key"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "_key cannot be 0x0"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "KeyItem"}, "name": "item", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyData"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, "index": {"type": "Identifier", "name": "index"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "pubKey"}, "right": {"type": "Identifier", "name": "_key"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "item"}, "memberName": "status"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}]}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_backups"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "bkps", "storageLocation": "memory"}], "initialValue": {"type": "Identifier", "name": "_backups"}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_backups"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "j", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "j"}, "right": {"type": "Identifier", "name": "i"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "j"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "bkps"}, "index": {"type": "Identifier", "name": "j"}}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_backups"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "StringLiteral", "value": "duplicate backup"}], "names": []}}]}}]}}]}, "FalseBody": null}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_backups"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "index"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_backups"}, "index": {"type": "Identifier", "name": "index"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_backup"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "backup cannot be 0x0"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_backup"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "StringLiteral", "value": "cannot be backup of oneself"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "backupData"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, "index": {"type": "Identifier", "name": "index"}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "BackupAccount"}, "arguments": [{"type": "Identifier", "name": "_backup"}, {"type": "Identifier", "name": "now"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "UnaryOperation", "operator": "-", "subExpression": {"type": "NumberLiteral", "number": "1", "subdenomination": null}, "isPrefix": true}], "names": []}], "names": []}}}]}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAccountCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "SafeMath", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "mul", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "Identifier", "name": "a"}}, "right": {"type": "Identifier", "name": "b"}}], "names": []}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "div", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "sub", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "Identifier", "name": "a"}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "add", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "Identifier", "name": "a"}}], "names": []}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "mod", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "ceil", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "Identifier", "name": "c"}]}, "FalseBody": {"type": "Block", "statements": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "library"}, {"type": "ContractDefinition", "name": "BaseLogic", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "SIGN_HASH_PREFIX", "expression": {"type": "StringLiteral", "value": "\\x19Ethereum Signed Message:\\n32"}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "StringLiteral", "value": "\\x19Ethereum Signed Message:\\n32"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "uint256"}}, "name": "keyNonce", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "AccountStorage"}, "name": "accountStorage", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "ModifierDefinition", "name": "allowSelfCallsOnly", "parameters": {"type": "ParameterList", "parameters": []}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}}, {"type": "StringLiteral", "value": "only internal call is allowed"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "ModifierDefinition", "name": "allowAccountCallsOnly", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Account"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "StringLiteral", "value": "caller must be account"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "EventDefinition", "name": "LogicInitialised", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "wallet", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "AccountStorage"}, "name": "_accountStorage", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "accountStorage"}, "right": {"type": "Identifier", "name": "_accountStorage"}}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "initAccount", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Account"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "LogicInitialised"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAccountCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getKeyNonce", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_key", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyNonce"}, "index": {"type": "Identifier", "name": "_key"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getSignHash", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_nonce", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "msgHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "byte"}}, "arguments": [{"type": "NumberLiteral", "number": "0x19", "subdenomination": null}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "byte"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "Identifier", "name": "_data"}, {"type": "Identifier", "name": "_nonce"}], "names": []}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "prefixedHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "SIGN_HASH_PREFIX"}, {"type": "Identifier", "name": "msgHash"}], "names": []}], "names": []}}, {"type": "Identifier", "name": "prefixedHash"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "verifySig", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_signingKey", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_signature", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_signHash", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_signingKey"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "invalid signing key"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "recoveredAddr", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "recover"}, "arguments": [{"type": "Identifier", "name": "_signHash"}, {"type": "Identifier", "name": "_signature"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "recoveredAddr"}, "right": {"type": "Identifier", "name": "_signingKey"}}, {"type": "StringLiteral", "value": "signature verification failed"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "recover", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "signature", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "signature"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "65", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "TupleExpression", "components": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}], "isArray": false}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "r", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "s", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "v", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "r"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "signature", "arguments": []}, {"type": "HexNumber", "value": "0x20"}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "s"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "signature", "arguments": []}, {"type": "HexNumber", "value": "0x40"}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "v"}], "expression": {"type": "AssemblyExpression", "functionName": "byte", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "signature", "arguments": []}, {"type": "HexNumber", "value": "0x60"}]}]}]}}]}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "s"}], "names": []}, "right": {"type": "NumberLiteral", "number": "0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}]}, "FalseBody": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "v"}, "right": {"type": "NumberLiteral", "number": "27", "subdenomination": null}}, "right": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "v"}, "right": {"type": "NumberLiteral", "number": "28", "subdenomination": null}}}, "TrueBody": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}]}, "FalseBody": null}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ecrecover"}, "arguments": [{"type": "Identifier", "name": "hash"}, {"type": "Identifier", "name": "v"}, {"type": "Identifier", "name": "r"}, {"type": "Identifier", "name": "s"}], "names": []}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "getSignerAddress", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_b", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_a", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_b"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "36", "subdenomination": null}}, {"type": "StringLiteral", "value": "invalid bytes"}], "names": []}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "mask"}], "expression": {"type": "HexNumber", "value": "0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "_a"}], "expression": {"type": "AssemblyExpression", "functionName": "and", "arguments": [{"type": "AssemblyExpression", "functionName": "mask", "arguments": []}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_b", "arguments": []}, {"type": "DecimalNumber", "value": "36"}]}]}]}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "getMethodId", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_b", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_a", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_b"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "4", "subdenomination": null}}, {"type": "StringLiteral", "value": "invalid data"}], "names": []}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "_a"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_b", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}]}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "checkKeyStatus", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "_index"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyStatus"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_index"}], "names": []}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, {"type": "StringLiteral", "value": "frozen key"}], "names": []}}]}, "FalseBody": null}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "checkAndUpdateNonce", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_key", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_nonce", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "_nonce"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyNonce"}, "index": {"type": "Identifier", "name": "_key"}}}, {"type": "StringLiteral", "value": "nonce too small"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SafeMath"}, "memberName": "div"}, "arguments": [{"type": "Identifier", "name": "_nonce"}, {"type": "NumberLiteral", "number": "1000000", "subdenomination": null}], "names": []}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "NumberLiteral", "number": "86400", "subdenomination": null}}}, {"type": "StringLiteral", "value": "nonce too big"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "keyNonce"}, "index": {"type": "Identifier", "name": "_key"}}, "right": {"type": "Identifier", "name": "_nonce"}}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "AccountBaseLogic", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "BaseLogic"}, "arguments": []}], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "DELAY_CHANGE_ADMIN_KEY", "expression": {"type": "NumberLiteral", "number": "21", "subdenomination": "days"}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "21", "subdenomination": "days"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "DELAY_CHANGE_OPERATION_KEY", "expression": {"type": "NumberLiteral", "number": "7", "subdenomination": "days"}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "7", "subdenomination": "days"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "DELAY_UNFREEZE_KEY", "expression": {"type": "NumberLiteral", "number": "7", "subdenomination": "days"}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "7", "subdenomination": "days"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "DELAY_CHANGE_BACKUP", "expression": {"type": "NumberLiteral", "number": "21", "subdenomination": "days"}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "21", "subdenomination": "days"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "DELAY_CHANGE_ADMIN_KEY_BY_BACKUP", "expression": {"type": "NumberLiteral", "number": "30", "subdenomination": "days"}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "30", "subdenomination": "days"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "MAX_DEFINED_BACKUP_INDEX", "expression": {"type": "NumberLiteral", "number": "5", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "5", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "CHANGE_ADMIN_KEY", "expression": {"type": "NumberLiteral", "number": "0xd595d935", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xd595d935", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "CHANGE_ADMIN_KEY_BY_BACKUP", "expression": {"type": "NumberLiteral", "number": "0xfdd54ba1", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xfdd54ba1", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "CHANGE_ADMIN_KEY_WITHOUT_DELAY", "expression": {"type": "NumberLiteral", "number": "0x441d2e50", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x441d2e50", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "CHANGE_ALL_OPERATION_KEYS", "expression": {"type": "NumberLiteral", "number": "0xd3b9d4d6", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xd3b9d4d6", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "UNFREEZE", "expression": {"type": "NumberLiteral", "number": "0x45c8b1a6", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x45c8b1a6", "subdenomination": null}}, {"type": "EventDefinition", "name": "ProposalExecuted", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "client", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "proposer", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "functionData", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "AccountStorage"}, "name": "_accountStorage", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": null, "body": {"type": "Block", "statements": []}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "BaseLogic", "arguments": [{"type": "Identifier", "name": "_accountStorage"}]}], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "executeProposal", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_functionData", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "proposedActionId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getMethodId"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "functionHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "checkApproval"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "proposedActionId"}, {"type": "Identifier", "name": "functionHash"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": null, "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, "memberName": "call"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "Identifier", "name": "success"}, {"type": "StringLiteral", "value": "executeProposal failed"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearProposalData"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "proposedActionId"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ProposalExecuted"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "_functionData"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "checkApproval", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_proposedActionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_functionHash", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getProposalDataHash"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "_proposedActionId"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "hash"}, "right": {"type": "Identifier", "name": "_functionHash"}}, {"type": "StringLiteral", "value": "proposal hash unmatch"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "backupCount", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "approvedCount", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "approved", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getProposalDataApproval"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "_proposedActionId"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "approved"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "no approval"}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupAddress"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "effectiveDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupEffectiveDate"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "expiryDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupExpiryDate"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "backup"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isEffectiveBackup"}, "arguments": [{"type": "Identifier", "name": "effectiveDate"}, {"type": "Identifier", "name": "expiryDate"}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "backupCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "k", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "k"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "approved"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "k"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "backup"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "approved"}, "index": {"type": "Identifier", "name": "k"}}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "approvedCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}]}, "FalseBody": null}]}}]}, "FalseBody": null}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "backupCount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "no backup in list"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "threshold", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SafeMath"}, "memberName": "ceil"}, "arguments": [{"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "backupCount"}, "right": {"type": "NumberLiteral", "number": "6", "subdenomination": null}}, {"type": "NumberLiteral", "number": "10", "subdenomination": null}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "approvedCount"}, "right": {"type": "Identifier", "name": "threshold"}}, {"type": "StringLiteral", "value": "must have 60% approval at least"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "checkRelation", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_backup"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "backup cannot be 0x0"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_client"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "client cannot be 0x0"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isBackup", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupAddress"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "effectiveDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupEffectiveDate"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "expiryDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupExpiryDate"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_backup"}, "right": {"type": "Identifier", "name": "backup"}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isEffectiveBackup"}, "arguments": [{"type": "Identifier", "name": "effectiveDate"}, {"type": "Identifier", "name": "expiryDate"}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "isBackup"}, "right": {"type": "BooleanLiteral", "value": true}}}, ";"]}, "FalseBody": null}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "Identifier", "name": "isBackup"}, {"type": "StringLiteral", "value": "backup does not exist in list"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "isEffectiveBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_effectiveDate", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_expiryDate", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "BinaryOperation", "operator": "&&", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "_effectiveDate"}, "right": {"type": "Identifier", "name": "now"}}], "isArray": false}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "_expiryDate"}, "right": {"type": "Identifier", "name": "now"}}], "isArray": false}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "clearRelatedProposalAfterAdminKeyChanged", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearProposalData"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_WITHOUT_DELAY"}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupAddress"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "effectiveDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupEffectiveDate"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "expiryDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupExpiryDate"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "backup"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isEffectiveBackup"}, "arguments": [{"type": "Identifier", "name": "effectiveDate"}, {"type": "Identifier", "name": "expiryDate"}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearProposalData"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "backup"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}], "names": []}}]}, "FalseBody": null}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "AccountLogic", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "AccountBaseLogic"}, "arguments": []}], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "DAPP_KEY_INDEX", "expression": {"type": "NumberLiteral", "number": "3", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "3", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "ADD_OPERATION_KEY", "expression": {"type": "NumberLiteral", "number": "0x9a7f6101", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x9a7f6101", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "PROPOSE_AS_BACKUP", "expression": {"type": "NumberLiteral", "number": "0xd470470f", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xd470470f", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "APPROVE_PROPOSAL", "expression": {"type": "NumberLiteral", "number": "0x3713f742", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x3713f742", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "ERC1271_ISVALIDSIGNATURE_BYTES", "expression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "StringLiteral", "value": "isValidSignature(bytes,bytes)"}], "names": []}], "names": []}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "StringLiteral", "value": "isValidSignature(bytes,bytes)"}], "names": []}], "names": []}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "ERC1271_ISVALIDSIGNATURE_BYTES32", "expression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "StringLiteral", "value": "isValidSignature(bytes32,bytes)"}], "names": []}], "names": []}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "StringLiteral", "value": "isValidSignature(bytes32,bytes)"}], "names": []}], "names": []}}, {"type": "EventDefinition", "name": "AccountLogicEntered", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "data", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "nonce", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "AccountLogicInitialised", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangeAdminKeyTriggered", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pkNew", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangeAdminKeyByBackupTriggered", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pkNew", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangeAllOperationKeysTriggered", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "pks", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "UnfreezeTriggered", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangeAdminKey", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pkNew", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangeAdminKeyByBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pkNew", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "AddOperationKey", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pkNew", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangeAllOperationKeys", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "pks", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Freeze", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Unfreeze", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "RemoveBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "CancelDelay", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "actionId", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "CancelAddBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "CancelRemoveBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ProposeAsBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "client", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "data", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ApproveProposal", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "backup", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "client", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "proposer", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "data", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "CancelProposal", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "client", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "proposer", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "proposedActionId", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "AccountStorage"}, "name": "_accountStorage", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": null, "body": {"type": "Block", "statements": []}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "AccountBaseLogic", "arguments": [{"type": "Identifier", "name": "_accountStorage"}]}], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "initAccount", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Account"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_account"}, "memberName": "enableStaticCall"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "Identifier", "name": "ERC1271_ISVALIDSIGNATURE_BYTES"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_account"}, "memberName": "enableStaticCall"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "Identifier", "name": "ERC1271_ISVALIDSIGNATURE_BYTES32"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "AccountLogicInitialised"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowAccountCallsOnly", "arguments": [{"type": "Identifier", "name": "_account"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "enter", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_signature", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_nonce", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getMethodId"}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}, "right": {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}}, {"type": "StringLiteral", "value": "invalid data"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getSignerAddress"}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "keyIndex", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getKeyIndex"}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "checkKeyStatus"}, "arguments": [{"type": "Identifier", "name": "account"}, {"type": "Identifier", "name": "keyIndex"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "signingKey", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyData"}, "arguments": [{"type": "Identifier", "name": "account"}, {"type": "Identifier", "name": "keyIndex"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "checkAndUpdateNonce"}, "arguments": [{"type": "Identifier", "name": "signingKey"}, {"type": "Identifier", "name": "_nonce"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "signHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getSignHash"}, "arguments": [{"type": "Identifier", "name": "_data"}, {"type": "Identifier", "name": "_nonce"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "verifySig"}, "arguments": [{"type": "Identifier", "name": "signingKey"}, {"type": "Identifier", "name": "_signature"}, {"type": "Identifier", "name": "signHash"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": null, "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, "memberName": "call"}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "Identifier", "name": "success"}, {"type": "StringLiteral", "value": "calling self failed"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "AccountLogicEntered"}, "arguments": [{"type": "Identifier", "name": "_data"}, {"type": "Identifier", "name": "_nonce"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "changeAdminKey", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_pkNew", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_pkNew"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "0x0 is invalid"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pk", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "pk"}, "right": {"type": "Identifier", "name": "_pkNew"}}, {"type": "StringLiteral", "value": "identical admin key exists"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY"}], "names": []}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data already exists"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "changeAdminKey"}, {"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY"}, {"type": "Identifier", "name": "hash"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "Identifier", "name": "DELAY_CHANGE_ADMIN_KEY"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangeAdminKey"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "triggerChangeAdminKey", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_pkNew", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "changeAdminKey"}, {"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "hash"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY"}], "names": []}}, {"type": "StringLiteral", "value": "delay hash unmatch"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "due", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataDueTime"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data not found"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "too early to trigger changeAdminKey"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "clearRelatedProposalAfterAdminKeyChanged"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangeAdminKeyTriggered"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "changeAdminKeyByBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_pkNew", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_pkNew"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "0x0 is invalid"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pk", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "pk"}, "right": {"type": "Identifier", "name": "_pkNew"}}, {"type": "StringLiteral", "value": "identical admin key exists"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}], "names": []}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data already exists"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "changeAdminKeyByBackup"}, {"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}, {"type": "Identifier", "name": "hash"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "Identifier", "name": "DELAY_CHANGE_ADMIN_KEY_BY_BACKUP"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangeAdminKeyByBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "triggerChangeAdminKeyByBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_pkNew", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "changeAdminKeyByBackup"}, {"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "hash"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}], "names": []}}, {"type": "StringLiteral", "value": "delay hash unmatch"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "due", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataDueTime"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data not found"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "too early to trigger changeAdminKeyByBackup"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ADMIN_KEY"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "clearRelatedProposalAfterAdminKeyChanged"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangeAdminKeyByBackupTriggered"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "addOperationKey", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_pkNew", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "+", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getOperationKeyCount"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "invalid operation key index"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "20", "subdenomination": null}}, {"type": "StringLiteral", "value": "index exceeds limit"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_pkNew"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "0x0 is invalid"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pk", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "pk"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "operation key already exists"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "increaseKeyCount"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "AddOperationKey"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pkNew"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "changeAllOperationKeys", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_pks", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "keyCount", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getOperationKeyCount"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_pks"}, "memberName": "length"}, "right": {"type": "Identifier", "name": "keyCount"}}, {"type": "StringLiteral", "value": "invalid number of keys"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ALL_OPERATION_KEYS"}], "names": []}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data already exists"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pk", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "keyCount"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "pk"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_pks"}, "index": {"type": "Identifier", "name": "i"}}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "pk"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "0x0 is invalid"}], "names": []}}]}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "changeAllOperationKeys"}, {"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pks"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ALL_OPERATION_KEYS"}, {"type": "Identifier", "name": "hash"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "Identifier", "name": "DELAY_CHANGE_OPERATION_KEY"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangeAllOperationKeys"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pks"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "triggerChangeAllOperationKeys", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_pks", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "changeAllOperationKeys"}, {"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pks"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "hash"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ALL_OPERATION_KEYS"}], "names": []}}, {"type": "StringLiteral", "value": "delay hash unmatch"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "due", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataDueTime"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ALL_OPERATION_KEYS"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data not found"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "too early to trigger changeAllOperationKeys"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "pk", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getOperationKeyCount"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "pk"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_pks"}, "index": {"type": "Identifier", "name": "i"}}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, {"type": "Identifier", "name": "pk"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyStatus"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "CHANGE_ALL_OPERATION_KEYS"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangeAllOperationKeysTriggered"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_pks"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "freeze", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getOperationKeyCount"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyStatus"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "i"}], "names": []}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyStatus"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "i"}, {"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}]}, "FalseBody": null}]}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Freeze"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "unfreeze", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "UNFREEZE"}], "names": []}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data already exists"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "unfreeze"}, {"type": "Identifier", "name": "_account"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "UNFREEZE"}, {"type": "Identifier", "name": "hash"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "Identifier", "name": "DELAY_UNFREEZE_KEY"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Unfreeze"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "triggerUnfreeze", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "unfreeze"}, {"type": "Identifier", "name": "_account"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "hash"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataHash"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "UNFREEZE"}], "names": []}}, {"type": "StringLiteral", "value": "delay hash unmatch"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "due", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getDelayDataDueTime"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "UNFREEZE"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "delay data not found"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "due"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "too early to trigger unfreeze"}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getOperationKeyCount"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyStatus"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "i"}], "names": []}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setKeyStatus"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "i"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}]}, "FalseBody": null}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "UNFREEZE"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "UnfreezeTriggered"}, "arguments": [{"type": "Identifier", "name": "_account"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "removeBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "findBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, {"type": "StringLiteral", "value": "backup invalid or not exist"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setBackupExpiryDate"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "now"}, "right": {"type": "Identifier", "name": "DELAY_CHANGE_BACKUP"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "RemoveBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_backup"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "findBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_backup"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "Identifier", "name": "index"}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "b", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupAddress"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "i"}], "names": []}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "Identifier", "name": "_backup"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "Identifier", "name": "i"}}}, ";"]}, "FalseBody": null}]}}, {"type": "Identifier", "name": "index"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "cancelDelay", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_actionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearDelayData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_actionId"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "CancelDelay"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_actionId"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "cancelAddBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "findBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, {"type": "StringLiteral", "value": "backup invalid or not exist"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "effectiveDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupEffectiveDate"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "effectiveDate"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "already effective"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearBackupData"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "CancelAddBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_backup"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "cancelRemoveBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "findBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "Identifier", "name": "MAX_DEFINED_BACKUP_INDEX"}}, {"type": "StringLiteral", "value": "backup invalid or not exist"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "expiryDate", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getBackupExpiryDate"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "expiryDate"}, "right": {"type": "Identifier", "name": "now"}}, {"type": "StringLiteral", "value": "already expired"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setBackupExpiryDate"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "index"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "UnaryOperation", "operator": "-", "subExpression": {"type": "NumberLiteral", "number": "1", "subdenomination": null}, "isPrefix": true}], "names": []}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "CancelRemoveBackup"}, "arguments": [{"type": "Identifier", "name": "_account"}, {"type": "Identifier", "name": "_backup"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "proposeAsBackup", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_functionData", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "proposedActionId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getMethodId"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "proposedActionId"}, "right": {"type": "Identifier", "name": "CHANGE_ADMIN_KEY_BY_BACKUP"}}, {"type": "StringLiteral", "value": "invalid proposal by backup"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "checkRelation"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "functionHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setProposalData"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_backup"}, {"type": "Identifier", "name": "proposedActionId"}, {"type": "Identifier", "name": "functionHash"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ProposeAsBackup"}, "arguments": [{"type": "Identifier", "name": "_backup"}, {"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_functionData"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "approveProposal", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_backup", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_functionData", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "functionHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "functionHash"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "invalid hash"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "checkRelation"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "proposedActionId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getMethodId"}, "arguments": [{"type": "Identifier", "name": "_functionData"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getProposalDataHash"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "proposedActionId"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "hash"}, "right": {"type": "Identifier", "name": "functionHash"}}, {"type": "StringLiteral", "value": "proposal unmatch"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "setProposalData"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "proposedActionId"}, {"type": "Identifier", "name": "functionHash"}, {"type": "Identifier", "name": "_backup"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ApproveProposal"}, "arguments": [{"type": "Identifier", "name": "_backup"}, {"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "_functionData"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "cancelProposal", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_client", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_proposer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_proposedActionId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_client"}, "right": {"type": "Identifier", "name": "_proposer"}}, {"type": "StringLiteral", "value": "cannot cancel dual signed proposal"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "clearProposalData"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "_proposedActionId"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "CancelProposal"}, "arguments": [{"type": "Identifier", "name": "_client"}, {"type": "Identifier", "name": "_proposer"}, {"type": "Identifier", "name": "_proposedActionId"}], "names": []}}]}, "visibility": "external", "modifiers": [{"type": "ModifierInvocation", "name": "allowSelfCallsOnly", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "isValidSignature", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_signature", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "msgHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isValidSignature"}, "arguments": [{"type": "Identifier", "name": "msgHash"}, {"type": "Identifier", "name": "_signature"}], "names": []}}, {"type": "Identifier", "name": "ERC1271_ISVALIDSIGNATURE_BYTES"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "isValidSignature", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_msgHash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_signature", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_signature"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "65", "subdenomination": null}}, {"type": "StringLiteral", "value": "invalid signature length"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "checkKeyStatus"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "DAPP_KEY_INDEX"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "signingKey", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "accountStorage"}, "memberName": "getKeyData"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "DAPP_KEY_INDEX"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "prefixedHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "SIGN_HASH_PREFIX"}, {"type": "Identifier", "name": "_msgHash"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "verifySig"}, "arguments": [{"type": "Identifier", "name": "signingKey"}, {"type": "Identifier", "name": "_signature"}, {"type": "Identifier", "name": "prefixedHash"}], "names": []}}, {"type": "Identifier", "name": "ERC1271_ISVALIDSIGNATURE_BYTES32"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getKeyIndex", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "methodId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getMethodId"}, "arguments": [{"type": "Identifier", "name": "_data"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "methodId"}, "right": {"type": "Identifier", "name": "ADD_OPERATION_KEY"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "methodId"}, "right": {"type": "Identifier", "name": "PROPOSE_AS_BACKUP"}}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "methodId"}, "right": {"type": "Identifier", "name": "APPROVE_PROPOSAL"}}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "4", "subdenomination": null}}}]}, "FalseBody": null}}, {"type": "Identifier", "name": "index"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "contract"}]}