{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.5.9"}, {"type": "PragmaDirective", "name": "experimental", "value": "ABIEncoderV2"}, {"type": "ContractDefinition", "name": "IERC20", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "approve", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "transferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "totalSupply", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOf", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "who", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "allowance", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "EventDefinition", "name": "Transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Approval", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}], "kind": "interface"}, {"type": "ContractDefinition", "name": "IERC1155", "baseContracts": [], "subNodes": [{"type": "EventDefinition", "name": "TransferSingle", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "TransferBatch", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ApprovalForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_approved", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "URI", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_amount", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": "safeTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "safeBatchTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "balanceOf", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOfBatch", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_owners", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": null, "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setApprovalForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_approved", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "isApprovedForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isOperator", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "interface"}, {"type": "ContractDefinition", "name": "LibBytes", "baseContracts": [], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "libraryName": "LibBytes"}, {"type": "FunctionDefinition", "name": "popLastByte", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "b", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes1"}, "name": "result", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "LibBytes#popLastByte: GREATER_THAN_ZERO_LENGTH_REQUIRED"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "result"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "b"}, "index": {"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "newLen"}], "expression": {"type": "AssemblyExpression", "functionName": "sub", "arguments": [{"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "b", "arguments": []}]}, {"type": "DecimalNumber", "value": "1"}]}}, {"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "AssemblyExpression", "functionName": "b", "arguments": []}, {"type": "AssemblyExpression", "functionName": "newLen", "arguments": []}]}]}}, {"type": "Identifier", "name": "result"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "readBytes32", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "b", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "index", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "result", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "b"}, "memberName": "length"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "32", "subdenomination": null}}}, {"type": "StringLiteral", "value": "LibBytes#readBytes32: GREATER_OR_EQUAL_TO_32_LENGTH_REQUIRED"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "32", "subdenomination": null}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "result"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "b", "arguments": []}, {"type": "AssemblyExpression", "functionName": "index", "arguments": []}]}]}}]}}, {"type": "Identifier", "name": "result"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "library"}, {"type": "ContractDefinition", "name": "IERC1271Wallet", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "isValidSignature", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_signature", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "magicValue", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "isValidSignature", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_hash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_signature", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "magicValue", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "interface"}, {"type": "ContractDefinition", "name": "LibEIP712", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "DOMAIN_SEPARATOR_TYPEHASH", "expression": {"type": "NumberLiteral", "number": "0x035aff83d86937d35b32e04f0ddc6ff469290eef2f1b692d8a815c89404d4749", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x035aff83d86937d35b32e04f0ddc6ff469290eef2f1b692d8a815c89404d4749", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "EIP712_DOMAIN_HASH", "expression": null, "visibility": "internal", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "EIP712_DOMAIN_HASH"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "DOMAIN_SEPARATOR_TYPEHASH"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}], "names": []}], "names": []}}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "hashEIP712Message", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hashStruct", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "result", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "NumberLiteral", "number": "0x1901000000000000000000000000000000000000000000000000000000000000", "subdenomination": null}], "names": []}, {"type": "Identifier", "name": "EIP712_DOMAIN_HASH"}, {"type": "Identifier", "name": "hashStruct"}], "names": []}], "names": []}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "contract"}, {"type": "ContractDefinition", "name": "SignatureValidator", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "LibEIP712"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "libraryName": "LibBytes"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "ERC1271_MAGICVALUE", "expression": {"type": "NumberLiteral", "number": "0x20c13b0b", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x20c13b0b", "subdenomination": null}}, {"type": "EnumDefinition", "name": "SignatureType", "members": [{"type": "EnumValue", "name": "Illegal"}, {"type": "EnumValue", "name": "EIP712"}, {"type": "EnumValue", "name": "EthSign"}, {"type": "EnumValue", "name": "WalletBytes"}, {"type": "EnumValue", "name": "WalletBytes32"}, {"type": "EnumValue", "name": "NSignatureTypes"}]}, {"type": "FunctionDefinition", "name": "isValidSignature", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_signerAddress", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_hash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_sig", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isValid", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: LENGTH_GREATER_THAN_0_REQUIRED"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_signerAddress"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0x0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: INVALID_SIGNER"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "signatureTypeRaw", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "popLastByte"}, "arguments": [], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "signatureTypeRaw"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SignatureType"}, "memberName": "NSignatureTypes"}], "names": []}}, {"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: UNSUPPORTED_SIGNATURE"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "SignatureType"}, "name": "signatureType", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "SignatureType"}, "arguments": [{"type": "Identifier", "name": "signatureTypeRaw"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "v", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "r", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "s", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "recovered", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "signatureType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SignatureType"}, "memberName": "Illegal"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "revert"}, "arguments": [{"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: ILLEGAL_SIGNATURE"}], "names": []}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "signatureType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SignatureType"}, "memberName": "EIP712"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "65", "subdenomination": null}}, {"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: LENGTH_65_REQUIRED"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "r"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "readBytes32"}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "s"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "readBytes32"}, "arguments": [{"type": "NumberLiteral", "number": "32", "subdenomination": null}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "v"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_sig"}, "index": {"type": "NumberLiteral", "number": "64", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "recovered"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ecrecover"}, "arguments": [{"type": "Identifier", "name": "_hash"}, {"type": "Identifier", "name": "v"}, {"type": "Identifier", "name": "r"}, {"type": "Identifier", "name": "s"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "isValid"}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_signerAddress"}, "right": {"type": "Identifier", "name": "recovered"}}}}, {"type": "Identifier", "name": "isValid"}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "signatureType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SignatureType"}, "memberName": "EthSign"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "65", "subdenomination": null}}, {"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: LENGTH_65_REQUIRED"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "r"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "readBytes32"}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "s"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_sig"}, "memberName": "readBytes32"}, "arguments": [{"type": "NumberLiteral", "number": "32", "subdenomination": null}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "v"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_sig"}, "index": {"type": "NumberLiteral", "number": "64", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "recovered"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ecrecover"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "\\x19Ethereum Signed Message:\\n32"}, {"type": "Identifier", "name": "_hash"}], "names": []}], "names": []}, {"type": "Identifier", "name": "v"}, {"type": "Identifier", "name": "r"}, {"type": "Identifier", "name": "s"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "isValid"}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_signerAddress"}, "right": {"type": "Identifier", "name": "recovered"}}}}, {"type": "Identifier", "name": "isValid"}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "signatureType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SignatureType"}, "memberName": "WalletBytes"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "isValid"}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "ERC1271_MAGICVALUE"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1271Wallet"}, "arguments": [{"type": "Identifier", "name": "_signerAddress"}], "names": []}, "memberName": "isValidSignature"}, "arguments": [{"type": "Identifier", "name": "_data"}, {"type": "Identifier", "name": "_sig"}], "names": []}}}}, {"type": "Identifier", "name": "isValid"}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "signatureType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "SignatureType"}, "memberName": "WalletBytes32"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "isValid"}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "ERC1271_MAGICVALUE"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1271Wallet"}, "arguments": [{"type": "Identifier", "name": "_signerAddress"}], "names": []}, "memberName": "isValidSignature"}, "arguments": [{"type": "Identifier", "name": "_hash"}, {"type": "Identifier", "name": "_sig"}], "names": []}}}}, {"type": "Identifier", "name": "isValid"}]}, "FalseBody": null}}}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "revert"}, "arguments": [{"type": "StringLiteral", "value": "SignatureValidator#isValidSignature: UNSUPPORTED_SIGNATURE"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "contract"}, {"type": "ContractDefinition", "name": "Address", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "isContract", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "codehash", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "accountHash", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470", "subdenomination": null}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "codehash"}], "expression": {"type": "AssemblyExpression", "functionName": "extcodehash", "arguments": [{"type": "AssemblyExpression", "functionName": "account", "arguments": []}]}}]}}, {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "codehash"}, "right": {"type": "NumberLiteral", "number": "0x0", "subdenomination": null}}, "right": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "codehash"}, "right": {"type": "Identifier", "name": "accountHash"}}}], "isArray": false}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "library"}, {"type": "PragmaDirective", "name": "solidity", "value": "^0.5.9"}, {"type": "ContractDefinition", "name": "IERC1155TokenReceiver", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "onERC1155Received", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "onERC1155BatchReceived", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "supportsInterface", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "interfaceID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "interface"}, {"type": "ContractDefinition", "name": "IERC165", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "supportsInterface", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_interfaceId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "interface"}, {"type": "PragmaDirective", "name": "solidity", "value": "^0.5.9"}, {"type": "ContractDefinition", "name": "SafeMath", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "mul", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "Identifier", "name": "a"}}, "right": {"type": "Identifier", "name": "b"}}, {"type": "StringLiteral", "value": "SafeMath#mul: OVERFLOW"}], "names": []}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "div", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "SafeMath#div: DIVISION_BY_ZERO"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "sub", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "Identifier", "name": "a"}}, {"type": "StringLiteral", "value": "SafeMath#sub: UNDERFLOW"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "add", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "Identifier", "name": "a"}}, {"type": "StringLiteral", "value": "SafeMath#add: OVERFLOW"}], "names": []}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "mod", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "SafeMath#mod: DIVISION_BY_ZERO"}], "names": []}}, {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "library"}, {"type": "ContractDefinition", "name": "ERC1155", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "IERC165"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "libraryName": "SafeMath"}, {"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "libraryName": "Address"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "ERC1155_RECEIVED_VALUE", "expression": {"type": "NumberLiteral", "number": "0xf23a6e61", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xf23a6e61", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "ERC1155_BATCH_RECEIVED_VALUE", "expression": {"type": "NumberLiteral", "number": "0xbc197c81", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xbc197c81", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "uint256"}, "valueType": {"type": "ElementaryTypeName", "name": "uint256"}}}, "name": "balances", "expression": null, "visibility": "internal", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "bool"}}}, "name": "operators", "expression": null, "visibility": "internal", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "EventDefinition", "name": "TransferSingle", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "TransferBatch", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ApprovalForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_approved", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "URI", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_uri", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": "safeTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "||", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "_from"}}], "isArray": false}, "right": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operators"}, "index": {"type": "Identifier", "name": "_from"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}, {"type": "StringLiteral", "value": "ERC1155#safeTransferFrom: INVALID_OPERATOR"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_to"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "ERC1155#safeTransferFrom: INVALID_RECIPIENT"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_callonERC1155Received"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}, {"type": "Identifier", "name": "_data"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "safeBatchTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "||", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "_from"}}], "isArray": false}, "right": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operators"}, "index": {"type": "Identifier", "name": "_from"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}, {"type": "StringLiteral", "value": "ERC1155#safeBatchTransferFrom: INVALID_OPERATOR"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_to"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "ERC1155#safeBatchTransferFrom: INVALID_RECIPIENT"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeBatchTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_callonERC1155BatchReceived"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}, {"type": "Identifier", "name": "_data"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_safeTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_from"}}, "index": {"type": "Identifier", "name": "_id"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_from"}}, "index": {"type": "Identifier", "name": "_id"}}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "_amount"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_to"}}, "index": {"type": "Identifier", "name": "_id"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_to"}}, "index": {"type": "Identifier", "name": "_id"}}, "memberName": "add"}, "arguments": [{"type": "Identifier", "name": "_amount"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TransferSingle"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_callonERC1155Received", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_to"}, "memberName": "isContract"}, "arguments": [], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "retval", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1155TokenReceiver"}, "arguments": [{"type": "Identifier", "name": "_to"}], "names": []}, "memberName": "onERC1155Received"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}, {"type": "Identifier", "name": "_data"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "retval"}, "right": {"type": "Identifier", "name": "ERC1155_RECEIVED_VALUE"}}, {"type": "StringLiteral", "value": "ERC1155#_callonERC1155Received: INVALID_ON_RECEIVE_MESSAGE"}], "names": []}}]}, "FalseBody": null}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_safeBatchTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_ids"}, "memberName": "length"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_amounts"}, "memberName": "length"}}, {"type": "StringLiteral", "value": "ERC1155#_safeBatchTransferFrom: INVALID_ARRAYS_LENGTH"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "nTransfer", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_ids"}, "memberName": "length"}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "nTransfer"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_from"}}, "index": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_ids"}, "index": {"type": "Identifier", "name": "i"}}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_from"}}, "index": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_ids"}, "index": {"type": "Identifier", "name": "i"}}}, "memberName": "sub"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_amounts"}, "index": {"type": "Identifier", "name": "i"}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_to"}}, "index": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_ids"}, "index": {"type": "Identifier", "name": "i"}}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_to"}}, "index": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_ids"}, "index": {"type": "Identifier", "name": "i"}}}, "memberName": "add"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_amounts"}, "index": {"type": "Identifier", "name": "i"}}], "names": []}}}]}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TransferBatch"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_callonERC1155BatchReceived", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_to"}, "memberName": "isContract"}, "arguments": [], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "retval", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1155TokenReceiver"}, "arguments": [{"type": "Identifier", "name": "_to"}], "names": []}, "memberName": "onERC1155BatchReceived"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}, {"type": "Identifier", "name": "_data"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "retval"}, "right": {"type": "Identifier", "name": "ERC1155_BATCH_RECEIVED_VALUE"}}, {"type": "StringLiteral", "value": "ERC1155#_callonERC1155BatchReceived: INVALID_ON_RECEIVE_MESSAGE"}], "names": []}}]}, "FalseBody": null}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "setApprovalForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_approved", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operators"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "_operator"}}, "right": {"type": "Identifier", "name": "_approved"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ApprovalForAll"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_operator"}, {"type": "Identifier", "name": "_approved"}], "names": []}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "isApprovedForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isOperator", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operators"}, "index": {"type": "Identifier", "name": "_owner"}}, "index": {"type": "Identifier", "name": "_operator"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOf", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "Identifier", "name": "_owner"}}, "index": {"type": "Identifier", "name": "_id"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOfBatch", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address"}, "length": null}, "name": "_owners", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "calldata", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": null, "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_owners"}, "memberName": "length"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_ids"}, "memberName": "length"}}, {"type": "StringLiteral", "value": "ERC1155#balanceOfBatch: INVALID_ARRAY_LENGTH"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "batchBalances", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_owners"}, "memberName": "length"}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_owners"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "batchBalances"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "balances"}, "index": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_owners"}, "index": {"type": "Identifier", "name": "i"}}}, "index": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_ids"}, "index": {"type": "Identifier", "name": "i"}}}}}]}}, {"type": "Identifier", "name": "batchBalances"}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "INTERFACE_SIGNATURE_ERC165", "expression": {"type": "NumberLiteral", "number": "0x01ffc9a7", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x01ffc9a7", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "INTERFACE_SIGNATURE_ERC1155", "expression": {"type": "NumberLiteral", "number": "0xd9b67a26", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xd9b67a26", "subdenomination": null}}, {"type": "FunctionDefinition", "name": "supportsInterface", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_interfaceID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_interfaceID"}, "right": {"type": "Identifier", "name": "INTERFACE_SIGNATURE_ERC165"}}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_interfaceID"}, "right": {"type": "Identifier", "name": "INTERFACE_SIGNATURE_ERC1155"}}}, "TrueBody": {"type": "Block", "statements": [{"type": "BooleanLiteral", "value": true}]}, "FalseBody": null}, {"type": "BooleanLiteral", "value": false}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "contract"}, {"type": "ContractDefinition", "name": "ERC1155Meta", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "ERC1155"}, "arguments": []}, {"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "SignatureValidator"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "libraryName": "LibBytes"}, {"type": "StructDefinition", "name": "GasReceipt", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "gasLimit", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "baseGas", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "gasPrice", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "feeRecipient", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "feeTokenData", "storageLocation": null}]}, {"type": "EnumDefinition", "name": "FeeTokenType", "members": [{"type": "EnumValue", "name": "ERC1155"}, {"type": "EnumValue", "name": "ERC20"}, {"type": "EnumValue", "name": "NTypes"}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "uint256"}}, "name": "nonces", "expression": null, "visibility": "internal", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "metaSafeTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_isGasFee", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_to"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "ERC1155Meta#metaSafeTransferFrom: INVALID_RECIPIENT"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "startGas", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "gasleft"}, "arguments": [], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "transferData", "storageLocation": "memory"}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "GasReceipt"}, "name": "gasReceipt", "storageLocation": "memory"}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "signedData", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_signatureValidation"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_data"}, {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "META_TX_TYPEHASH"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}], "names": []}], "names": []}}, {"type": "IfStatement", "condition": {"type": "Identifier", "name": "_isGasFee"}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "gasReceipt"}, {"type": "Identifier", "name": "transferData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "decode"}, "arguments": [{"type": "Identifier", "name": "signedData"}, {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "GasReceipt"}, {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}], "isArray": false}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_to"}, "memberName": "isContract"}, "arguments": [], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "retval", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1155TokenReceiver"}, "arguments": [{"type": "Identifier", "name": "_to"}], "names": []}, "memberName": "onERC1155Received"}, "memberName": "gas"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "gasReceipt"}, "memberName": "gasLimit"}], "names": []}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}, {"type": "Identifier", "name": "transferData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "retval"}, "right": {"type": "Identifier", "name": "ERC1155_RECEIVED_VALUE"}}, {"type": "StringLiteral", "value": "ERC1155Meta#metaSafeTransferFrom: INVALID_ON_RECEIVE_MESSAGE"}], "names": []}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_transferGasFee"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "startGas"}, {"type": "Identifier", "name": "gasReceipt"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_callonERC1155Received"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_id"}, {"type": "Identifier", "name": "_amount"}, {"type": "Identifier", "name": "signedData"}], "names": []}}]}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "metaSafeBatchTransferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_ids", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "_amounts", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_isGasFee", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_to"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "ERC1155Meta#metaSafeBatchTransferFrom: INVALID_RECIPIENT"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "startGas", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "gasleft"}, "arguments": [], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "transferData", "storageLocation": "memory"}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "GasReceipt"}, "name": "gasReceipt", "storageLocation": "memory"}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "signedData", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_signatureValidation"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_data"}, {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "META_BATCH_TX_TYPEHASH"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "_ids"}], "names": []}], "names": []}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "_amounts"}], "names": []}], "names": []}], "names": []}], "names": []}}, {"type": "IfStatement", "condition": {"type": "Identifier", "name": "_isGasFee"}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "gasReceipt"}, {"type": "Identifier", "name": "transferData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "decode"}, "arguments": [{"type": "Identifier", "name": "signedData"}, {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "GasReceipt"}, {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}], "isArray": false}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeBatchTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_to"}, "memberName": "isContract"}, "arguments": [], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "retval", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1155TokenReceiver"}, "arguments": [{"type": "Identifier", "name": "_to"}], "names": []}, "memberName": "onERC1155BatchReceived"}, "memberName": "gas"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "gasReceipt"}, "memberName": "gasLimit"}], "names": []}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}, {"type": "Identifier", "name": "transferData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "retval"}, "right": {"type": "Identifier", "name": "ERC1155_BATCH_RECEIVED_VALUE"}}, {"type": "StringLiteral", "value": "ERC1155Meta#metaSafeBatchTransferFrom: INVALID_ON_RECEIVE_MESSAGE"}], "names": []}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_transferGasFee"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "startGas"}, {"type": "Identifier", "name": "gasReceipt"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeBatchTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_callonERC1155BatchReceived"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "_to"}, {"type": "Identifier", "name": "_ids"}, {"type": "Identifier", "name": "_amounts"}, {"type": "Identifier", "name": "signedData"}], "names": []}}]}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "metaSetApprovalForAll", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_approved", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_isGasFee", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_data", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "startGas", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "gasleft"}, "arguments": [], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "signedData", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_signatureValidation"}, "arguments": [{"type": "Identifier", "name": "_owner"}, {"type": "Identifier", "name": "_data"}, {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "META_APPROVAL_TYPEHASH"}, {"type": "Identifier", "name": "_owner"}, {"type": "Identifier", "name": "_operator"}, {"type": "Identifier", "name": "_approved"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "operators"}, "index": {"type": "Identifier", "name": "_owner"}}, "index": {"type": "Identifier", "name": "_operator"}}, "right": {"type": "Identifier", "name": "_approved"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ApprovalForAll"}, "arguments": [{"type": "Identifier", "name": "_owner"}, {"type": "Identifier", "name": "_operator"}, {"type": "Identifier", "name": "_approved"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "Identifier", "name": "_isGasFee"}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "GasReceipt"}, "name": "gasReceipt", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "decode"}, "arguments": [{"type": "Identifier", "name": "signedData"}, {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "GasReceipt"}], "isArray": false}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_transferGasFee"}, "arguments": [{"type": "Identifier", "name": "_owner"}, {"type": "Identifier", "name": "startGas"}, {"type": "Identifier", "name": "gasReceipt"}], "names": []}}]}, "FalseBody": null}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "META_TX_TYPEHASH", "expression": {"type": "NumberLiteral", "number": "0xda41aee141786e5a994acb21bcafccf68ed6e07786cb44008c785a06f2819038", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xda41aee141786e5a994acb21bcafccf68ed6e07786cb44008c785a06f2819038", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "META_BATCH_TX_TYPEHASH", "expression": {"type": "NumberLiteral", "number": "0xa358be8ef28a8eef7877f5d78ce30ff1cada344474e3d550ee9f4be9151f84f7", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xa358be8ef28a8eef7877f5d78ce30ff1cada344474e3d550ee9f4be9151f84f7", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "META_APPROVAL_TYPEHASH", "expression": {"type": "NumberLiteral", "number": "0xd72d507eb90d918a375b250ea7bfc291be59526e94e2baa2fe3b35daa72a0b15", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0xd72d507eb90d918a375b250ea7bfc291be59526e94e2baa2fe3b35daa72a0b15", "subdenomination": null}}, {"type": "FunctionDefinition", "name": "_signatureValidation", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_signer", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_sigData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_encMembers", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "signedData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "nonce", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "nonces"}, "index": {"type": "Identifier", "name": "_signer"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "sig", "storageLocation": "memory"}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "sig"}, {"type": "Identifier", "name": "signedData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "decode"}, "arguments": [{"type": "Identifier", "name": "_sigData"}, {"type": "TupleExpression", "components": [{"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}], "isArray": false}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "hashEIP712Message"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "_encMembers"}, {"type": "Identifier", "name": "nonce"}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "Identifier", "name": "signedData"}], "names": []}], "names": []}], "names": []}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "fullData", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "Identifier", "name": "_encMembers"}, {"type": "Identifier", "name": "nonce"}, {"type": "Identifier", "name": "signedData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isValidSignature"}, "arguments": [{"type": "Identifier", "name": "_signer"}, {"type": "Identifier", "name": "hash"}, {"type": "Identifier", "name": "fullData"}, {"type": "Identifier", "name": "sig"}], "names": []}, {"type": "StringLiteral", "value": "ERC1155Meta#_signatureValidation: INVALID_SIGNATURE"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "nonces"}, "index": {"type": "Identifier", "name": "_signer"}}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "nonce"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}}, {"type": "Identifier", "name": "signedData"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getNonce", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_signer", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "nonce", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "nonces"}, "index": {"type": "Identifier", "name": "_signer"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "_transferGasFee", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_startGas", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "GasReceipt"}, "name": "_g", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "feeTokenTypeRaw", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "feeTokenData"}, "memberName": "popLastByte"}, "arguments": [], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "feeTokenTypeRaw"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "FeeTokenType"}, "memberName": "NTypes"}], "names": []}}, {"type": "StringLiteral", "value": "ERC1155Meta#_transferGasFee: UNSUPPORTED_TOKEN"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "FeeTokenType"}, "name": "feeTokenType", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "FeeTokenType"}, "arguments": [{"type": "Identifier", "name": "feeTokenTypeRaw"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "tokenAddress", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "feeRecipient", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "gasUsed", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "tokenID", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "fee", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "gasUsed"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_startGas"}, "memberName": "sub"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "gasleft"}, "arguments": [], "names": []}], "names": []}, "memberName": "add"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "baseGas"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "fee"}, "right": {"type": "Conditional", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "gasUsed"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "gasLimit"}}, "TrueExpression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "gasLimit"}, "memberName": "mul"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "gasPrice"}], "names": []}, "FalseExpression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "gasUsed"}, "memberName": "mul"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "gasPrice"}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "feeRecipient"}, "right": {"type": "Conditional", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "feeRecipient"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "TrueExpression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "FalseExpression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "feeRecipient"}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "feeTokenType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "FeeTokenType"}, "memberName": "ERC1155"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "tokenAddress"}, {"type": "Identifier", "name": "tokenID"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "decode"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "feeTokenData"}, {"type": "TupleExpression", "components": [{"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}], "isArray": false}], "names": []}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "tokenAddress"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_safeTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "feeRecipient"}, {"type": "Identifier", "name": "tokenID"}, {"type": "Identifier", "name": "fee"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_callonERC1155Received"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "feeRecipient"}, {"type": "Identifier", "name": "tokenID"}, {"type": "Identifier", "name": "fee"}, {"type": "StringLiteral", "value": ""}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1155"}, "arguments": [{"type": "Identifier", "name": "tokenAddress"}], "names": []}, "memberName": "safeTransferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "feeRecipient"}, {"type": "Identifier", "name": "tokenID"}, {"type": "Identifier", "name": "fee"}, {"type": "StringLiteral", "value": ""}], "names": []}}]}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "tokenAddress"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "decode"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_g"}, "memberName": "feeTokenData"}, {"type": "TupleExpression", "components": [{"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}], "isArray": false}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC20"}, "arguments": [{"type": "Identifier", "name": "tokenAddress"}], "names": []}, "memberName": "transferFrom"}, "arguments": [{"type": "Identifier", "name": "_from"}, {"type": "Identifier", "name": "feeRecipient"}, {"type": "Identifier", "name": "fee"}], "names": []}, {"type": "StringLiteral", "value": "ERC1155Meta#_transferGasFee: ERC20_TRANSFER_FAILED"}], "names": []}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}]}