{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.5.0"}, {"type": "ContractDefinition", "name": "RevolutionFactory", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "string"}, "length": null}, "name": "hashtags", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "string"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Revolution"}}, "name": "revolutions", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "createRevolution", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_criteria", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_hashtag", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_distributionBlockPeriod", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_distributionAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_testingMode", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "revolutions"}, "index": {"type": "Identifier", "name": "_hashtag"}}], "names": []}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "revolutions"}, "index": {"type": "Identifier", "name": "_hashtag"}}, "right": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "UserDefinedTypeName", "namePath": "Revolution"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_criteria"}, {"type": "Identifier", "name": "_hashtag"}, {"type": "Identifier", "name": "_distributionBlockPeriod"}, {"type": "Identifier", "name": "_distributionAmount"}, {"type": "Identifier", "name": "_testingMode"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "hashtags"}, "memberName": "push"}, "arguments": [{"type": "Identifier", "name": "_hashtag"}], "names": []}}]}, "FalseBody": null}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getRevolution", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_hashtag", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Revolution"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "revolutions"}, "index": {"type": "Identifier", "name": "_hashtag"}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "lockRevolution", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_hashtag", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "owner"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "revolutions"}, "index": {"type": "Identifier", "name": "_hashtag"}}, "memberName": "lock"}, "arguments": [], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "Revolution", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "factory", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "criteria", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "hashtag", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "distributionBlockPeriod", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "distributionAmount", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "lastDistributionBlockNumber", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "testingMode", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "locked", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StructDefinition", "name": "JusticeScale", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "length": null}, "name": "voters", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "uint"}}, "name": "votes", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "amount", "storageLocation": null}]}, {"type": "StructDefinition", "name": "Trial", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "citizen", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "JusticeScale"}, "name": "sansculotteScale", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "JusticeScale"}, "name": "privilegedScale", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "lastLotteryBlock", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "opened", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "matchesCriteria", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "length": null}, "name": "citizens", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "string"}}, "name": "names", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Trial"}}, "name": "trials", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "bastilleBalance", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "EventDefinition", "name": "RevolutionCreated", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_hashtag", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "TrialOpened", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_eventName", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_citizen", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "TrialClosed", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_eventName", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_citizen", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_matchesCriteria", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "VoteReceived", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_eventName", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_citizen", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_vote", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_amount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Distribution", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_eventName", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_citizen", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_distributionAmount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_criteria", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_hashtag", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_distributionBlockPeriod", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_distributionAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_testingMode", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "factory"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "owner"}, "right": {"type": "Identifier", "name": "_owner"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "criteria"}, "right": {"type": "Identifier", "name": "_criteria"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "hashtag"}, "right": {"type": "Identifier", "name": "_hashtag"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "distributionBlockPeriod"}, "right": {"type": "Identifier", "name": "_distributionBlockPeriod"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "distributionAmount"}, "right": {"type": "Identifier", "name": "_distributionAmount"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "lastDistributionBlockNumber"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "testingMode"}, "right": {"type": "Identifier", "name": "_testingMode"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "locked"}, "right": {"type": "BooleanLiteral", "value": false}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "RevolutionCreated"}, "arguments": [{"type": "Identifier", "name": "hashtag"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "lock", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "owner"}}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "factory"}}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "locked"}, "right": {"type": "BooleanLiteral", "value": true}}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "vote", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_vote", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "locked"}, "right": {"type": "BooleanLiteral", "value": false}}, "right": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "bastilleBalance"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "distributionAmount"}, "right": {"type": "NumberLiteral", "number": "10", "subdenomination": null}}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Trial"}, "name": "trial", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "trials"}, "index": {"type": "Identifier", "name": "_citizen"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_vote"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "matchesCriteria"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "opened"}, "right": {"type": "BooleanLiteral", "value": true}}}]}, "FalseBody": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "citizen"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0x0", "subdenomination": null}], "names": []}}, "TrueBody": {"type": "Block", "statements": [{"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TrialOpened"}, "arguments": [{"type": "StringLiteral", "value": "TrialOpened"}, {"type": "Identifier", "name": "_citizen"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "citizens"}, "memberName": "push"}, "arguments": [{"type": "Identifier", "name": "_citizen"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "citizen"}, "right": {"type": "Identifier", "name": "_citizen"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "lastLotteryBlock"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}}}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "JusticeScale"}, "name": "scale", "storageLocation": "storage"}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "sansculotteScale"}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_vote"}, "right": {"type": "BooleanLiteral", "value": false}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "scale"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "privilegedScale"}}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "scale"}, "memberName": "voters"}, "memberName": "push"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "scale"}, "memberName": "votes"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "scale"}, "memberName": "amount"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "VoteReceived"}, "arguments": [{"type": "StringLiteral", "value": "VoteReceived"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_citizen"}, {"type": "Identifier", "name": "_vote"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "testingMode"}, "right": {"type": "BooleanLiteral", "value": false}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "closeTrial"}, "arguments": [{"type": "Identifier", "name": "_citizen"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "distribute"}, "arguments": [], "names": []}}]}, "FalseBody": null}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "closeTrial", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "shouldClose", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "trialLottery"}, "arguments": [{"type": "Identifier", "name": "_citizen"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "shouldClose"}, "right": {"type": "BooleanLiteral", "value": false}}, "TrueBody": {"type": "Block", "statements": [null]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Trial"}, "name": "trial", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "trials"}, "index": {"type": "Identifier", "name": "_citizen"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "opened"}, "right": {"type": "BooleanLiteral", "value": false}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "JusticeScale"}, "name": "winnerScale", "storageLocation": "storage"}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "privilegedScale"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "JusticeScale"}, "name": "loserScale", "storageLocation": "storage"}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "sansculotteScale"}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "matchesCriteria"}, "right": {"type": "BooleanLiteral", "value": false}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "sansculotteScale"}, "memberName": "amount"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "privilegedScale"}, "memberName": "amount"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "winnerScale"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "sansculotteScale"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "loserScale"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "privilegedScale"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "matchesCriteria"}, "right": {"type": "BooleanLiteral", "value": true}}}]}, "FalseBody": null}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TrialClosed"}, "arguments": [{"type": "StringLiteral", "value": "TrialClosed"}, {"type": "Identifier", "name": "_citizen"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "matchesCriteria"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "bastilleVote", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "amount"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "amount"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "remainingRewardCakes", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "amount"}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "voters"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "voter", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "voters"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "winningCakes", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "votes"}, "index": {"type": "Identifier", "name": "voter"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "votes"}, "index": {"type": "Identifier", "name": "voter"}}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "voter"}, "memberName": "send"}, "arguments": [{"type": "Identifier", "name": "winningCakes"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "rewardCakes", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "BinaryOperation", "operator": "*", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "amount"}, "right": {"type": "Identifier", "name": "winningCakes"}}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "amount"}, "right": {"type": "Identifier", "name": "bastilleVote"}}], "isArray": false}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "voter"}, "memberName": "send"}, "arguments": [{"type": "Identifier", "name": "rewardCakes"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "-=", "left": {"type": "Identifier", "name": "remainingRewardCakes"}, "right": {"type": "Identifier", "name": "rewardCakes"}}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "bastilleBalance"}, "right": {"type": "Identifier", "name": "remainingRewardCakes"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "winnerScale"}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "voters"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "voter", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "voters"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "votes"}, "index": {"type": "Identifier", "name": "voter"}}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "loserScale"}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "pseudoRandomNumber", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_max", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "randomHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "difficulty"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "timestamp"}], "names": []}], "names": []}], "names": []}}, {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "randomHash"}, "right": {"type": "Identifier", "name": "_max"}}]}, "visibility": "private", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "trialLottery", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "testingMode"}, "right": {"type": "BooleanLiteral", "value": true}}, "TrueBody": {"type": "Block", "statements": [{"type": "BooleanLiteral", "value": true}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "probabilityPercent", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "50", "subdenomination": null}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "million", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "1000000", "subdenomination": null}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "threshold", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "million"}, "right": {"type": "Identifier", "name": "probabilityPercent"}}, "right": {"type": "NumberLiteral", "number": "100", "subdenomination": null}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Trial"}, "name": "trial", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "trials"}, "index": {"type": "Identifier", "name": "_citizen"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "blocksSince", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "lastLotteryBlock"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "blocksSince"}, "right": {"type": "Identifier", "name": "distributionBlockPeriod"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "*=", "left": {"type": "Identifier", "name": "threshold"}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "blocksSince"}, "right": {"type": "Identifier", "name": "distributionBlockPeriod"}}}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "lastLotteryBlock"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "pseudoRandomNumber"}, "arguments": [{"type": "Identifier", "name": "million"}], "names": []}, "right": {"type": "Identifier", "name": "threshold"}}, "TrueBody": {"type": "Block", "statements": [{"type": "BooleanLiteral", "value": true}]}, "FalseBody": null}, {"type": "BooleanLiteral", "value": false}]}, "visibility": "private", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "distribute", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}, "right": {"type": "Identifier", "name": "lastDistributionBlockNumber"}}, "right": {"type": "Identifier", "name": "distributionBlockPeriod"}}, "TrueBody": {"type": "Block", "statements": [null]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "firstCitizen", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "pseudoRandomNumber"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "citizens"}, "memberName": "length"}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "citizens"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "citizenIndex", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "firstCitizen"}, "right": {"type": "Identifier", "name": "i"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "citizenIndex"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "citizens"}, "memberName": "length"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "citizenIndex"}, "right": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "citizenIndex"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "citizens"}, "memberName": "length"}}}}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "citizen", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "citizens"}, "index": {"type": "Identifier", "name": "citizenIndex"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Trial"}, "name": "trial", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "trials"}, "index": {"type": "Identifier", "name": "citizen"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "opened"}, "right": {"type": "BooleanLiteral", "value": false}}, "right": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "matchesCriteria"}, "right": {"type": "BooleanLiteral", "value": true}}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "distributed", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "bastilleBalance"}, "right": {"type": "Identifier", "name": "distributionAmount"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "distributed"}, "right": {"type": "Identifier", "name": "distributionAmount"}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "locked"}, "right": {"type": "BooleanLiteral", "value": true}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "distributed"}, "right": {"type": "Identifier", "name": "bastilleBalance"}}}]}, "FalseBody": null}]}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "distributed"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "citizen"}, "memberName": "send"}, "arguments": [{"type": "Identifier", "name": "distributed"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "-=", "left": {"type": "Identifier", "name": "bastilleBalance"}, "right": {"type": "Identifier", "name": "distributed"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Distribution"}, "arguments": [{"type": "StringLiteral", "value": "Distribution"}, {"type": "Identifier", "name": "citizen"}, {"type": "Identifier", "name": "distributed"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Distribution"}, "arguments": [{"type": "StringLiteral", "value": "Distribution"}, {"type": "Identifier", "name": "citizen"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}]}}]}, "FalseBody": null}]}, "FalseBody": null}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "lastDistributionBlockNumber"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getScaleAmount", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_vote", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Trial"}, "name": "trial", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "trials"}, "index": {"type": "Identifier", "name": "_citizen"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_vote"}, "right": {"type": "BooleanLiteral", "value": true}}, "TrueBody": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "sansculotteScale"}, "memberName": "amount"}, "FalseBody": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "privilegedScale"}, "memberName": "amount"}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "trialStatus", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "opened", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "matchesCriteria", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "sansculotteScale", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "privilegedScale", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "name", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Trial"}, "name": "trial", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "trials"}, "index": {"type": "Identifier", "name": "_citizen"}}}, {"type": "TupleExpression", "components": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "opened"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "matchesCriteria"}, {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "sansculotteScale"}, "memberName": "amount"}, {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "trial"}, "memberName": "privilegedScale"}, "memberName": "amount"}, {"type": "IndexAccess", "base": {"type": "Identifier", "name": "names"}, "index": {"type": "Identifier", "name": "_citizen"}}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getName", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "name", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "names"}, "index": {"type": "Identifier", "name": "_citizen"}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setName", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_name", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "_citizen"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "names"}, "index": {"type": "Identifier", "name": "_citizen"}}, "right": {"type": "Identifier", "name": "_name"}}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "voteAndSetName", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "_vote", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "_citizen", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_name", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "vote"}, "arguments": [{"type": "Identifier", "name": "_vote"}, {"type": "Identifier", "name": "_citizen"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "setName"}, "arguments": [{"type": "Identifier", "name": "_citizen"}, {"type": "Identifier", "name": "_name"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "locked"}, "right": {"type": "BooleanLiteral", "value": false}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "bastilleBalance"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}], "kind": "contract"}]}