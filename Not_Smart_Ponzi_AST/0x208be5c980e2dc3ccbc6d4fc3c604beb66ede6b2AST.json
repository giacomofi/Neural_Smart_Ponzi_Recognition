{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.5.2"}, {"type": "ContractDefinition", "name": "Math", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "max", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "Conditional", "condition": {"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}, "TrueExpression": {"type": "Identifier", "name": "a"}, "FalseExpression": {"type": "Identifier", "name": "b"}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "min", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "Conditional", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}, "TrueExpression": {"type": "Identifier", "name": "a"}, "FalseExpression": {"type": "Identifier", "name": "b"}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "average", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "+", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "/", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}, "right": {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}}], "isArray": false}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "library"}, {"type": "ContractDefinition", "name": "SafeMath", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "mul", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "Identifier", "name": "a"}}, "right": {"type": "Identifier", "name": "b"}}], "names": []}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "div", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "sub", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "Identifier", "name": "a"}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "add", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "c", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "c"}, "right": {"type": "Identifier", "name": "a"}}], "names": []}}, {"type": "Identifier", "name": "c"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "mod", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "b", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "b"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "Identifier", "name": "b"}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "library"}, {"type": "ContractDefinition", "name": "Initializable", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "initialized", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "initializing", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "ModifierDefinition", "name": "initializer", "parameters": {"type": "ParameterList", "parameters": []}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": "||", "left": {"type": "Identifier", "name": "initializing"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isConstructor"}, "arguments": [], "names": []}}, "right": {"type": "UnaryOperation", "operator": "!", "subExpression": {"type": "Identifier", "name": "initialized"}, "isPrefix": true}}, {"type": "StringLiteral", "value": "Contract instance has already been initialized"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "wasInitializing", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "initializing"}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "initializing"}, "right": {"type": "BooleanLiteral", "value": true}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "initialized"}, "right": {"type": "BooleanLiteral", "value": true}}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "initializing"}, "right": {"type": "Identifier", "name": "wasInitializing"}}}]}}, {"type": "FunctionDefinition", "name": "isConstructor", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "cs", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "cs"}], "expression": {"type": "AssemblyExpression", "functionName": "extcodesize", "arguments": [{"type": "AssemblyExpression", "functionName": "address", "arguments": []}]}}]}}, {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "cs"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}]}, "visibility": "private", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": {"type": "NumberLiteral", "number": "50", "subdenomination": null}}, "name": "______gap", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "Adminable", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "Initializable"}, "arguments": []}], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "ADMIN_SLOT", "expression": {"type": "NumberLiteral", "number": "0x10d6a54a4754c8869d6886b5f5d7fbfa5b4522237ea5c60d11bc4e7a1ff9390b", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x10d6a54a4754c8869d6886b5f5d7fbfa5b4522237ea5c60d11bc4e7a1ff9390b", "subdenomination": null}}, {"type": "ModifierDefinition", "name": "ifAdmin", "parameters": {"type": "ParameterList", "parameters": []}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_admin"}, "arguments": [], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "FunctionDefinition", "name": "admin", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_admin"}, "arguments": [], "names": []}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "implementation", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "impl", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "slot", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0x7050c9e0f4ca769c69bd3a8ef740bc37934f8e2c036e5a723fd8ee048ed3f8c3", "subdenomination": null}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "impl"}], "expression": {"type": "AssemblyExpression", "functionName": "sload", "arguments": [{"type": "AssemblyExpression", "functionName": "slot", "arguments": []}]}}]}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "_admin", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "adm", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "slot", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "ADMIN_SLOT"}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "adm"}], "expression": {"type": "AssemblyExpression", "functionName": "sload", "arguments": [{"type": "AssemblyExpression", "functionName": "slot", "arguments": []}]}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "contract"}, {"type": "ContractDefinition", "name": "Bridge", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "Adminable"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "libraryName": "SafeMath"}, {"type": "ModifierDefinition", "name": "onlyOperator", "parameters": {"type": "ParameterList", "parameters": []}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "operator"}}, {"type": "StringLiteral", "value": "Tried to call a only-operator function from non-operator"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "EventDefinition", "name": "NewHeight", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "height", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "root", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "NewOperator", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "operator", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "StructDefinition", "name": "Period", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "height", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "timestamp", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "parentBlockNumber", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "parentBlockHash", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "GENESIS", "expression": {"type": "NumberLiteral", "number": "0x4920616d207665727920616e6772792c20627574206974207761732066756e21", "subdenomination": null}, "visibility": "default", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x4920616d207665727920616e6772792c20627574206974207761732066756e21", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "tipHash", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "genesisBlockNumber", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "parentBlockInterval", "expression": null, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "lastParentBlock", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "operator", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes32"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Period"}}, "name": "periods", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "initialize", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_parentBlockInterval", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Period"}, "name": "genesisPeriod", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Period"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "timestamp"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "blockhash"}, "arguments": [{"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}], "names": []}], "names": ["height", "timestamp", "parentBlockNumber", "parentBlockHash"]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "tipHash"}, "right": {"type": "Identifier", "name": "GENESIS"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "periods"}, "index": {"type": "Identifier", "name": "GENESIS"}}, "right": {"type": "Identifier", "name": "genesisPeriod"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "genesisBlockNumber"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "parentBlockInterval"}, "right": {"type": "Identifier", "name": "_parentBlockInterval"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "operator"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "initializer", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "setOperator", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_operator", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "operator"}, "right": {"type": "Identifier", "name": "_operator"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "NewOperator"}, "arguments": [{"type": "Identifier", "name": "_operator"}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "ifAdmin", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getParentBlockInterval", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "Identifier", "name": "parentBlockInterval"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "setParentBlockInterval", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_parentBlockInterval", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "parentBlockInterval"}, "right": {"type": "Identifier", "name": "_parentBlockInterval"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "ifAdmin", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "submitPeriod", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_prevHash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_root", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "newHeight", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "periods"}, "index": {"type": "Identifier", "name": "_prevHash"}}, "memberName": "timestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "Parent node should exist"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "periods"}, "index": {"type": "Identifier", "name": "_root"}}, "memberName": "timestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "Trying to submit the same root twice"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "newHeight"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "periods"}, "index": {"type": "Identifier", "name": "_prevHash"}}, "memberName": "height"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "newHeight"}, "right": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "periods"}, "index": {"type": "Identifier", "name": "tipHash"}}, "memberName": "height"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "lastParentBlock"}, "right": {"type": "Identifier", "name": "parentBlockInterval"}}}, {"type": "StringLiteral", "value": "Tried to submit new period too soon"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "tipHash"}, "right": {"type": "Identifier", "name": "_root"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "lastParentBlock"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}}}]}, "FalseBody": null}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "NewHeight"}, "arguments": [{"type": "Identifier", "name": "newHeight"}, {"type": "Identifier", "name": "_root"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Period"}, "name": "newPeriod", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Period"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "Identifier", "name": "newHeight"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "timestamp"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "blockhash"}, "arguments": [{"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "number"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}], "names": []}], "names": ["height", "timestamp", "parentBlockNumber", "parentBlockHash"]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "periods"}, "index": {"type": "Identifier", "name": "_root"}}, "right": {"type": "Identifier", "name": "newPeriod"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "onlyOperator", "arguments": []}], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "IERC20", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "approve", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "transferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "totalSupply", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOf", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "who", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "allowance", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "EventDefinition", "name": "Transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Approval", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}], "kind": "interface"}, {"type": "ContractDefinition", "name": "ERC20", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "IERC20"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "libraryName": "SafeMath"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "uint256"}}, "name": "_balances", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "uint256"}}}, "name": "_allowed", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_totalSupply", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "totalSupply", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "Identifier", "name": "_totalSupply"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOf", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "owner"}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "allowance", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "owner"}}, "index": {"type": "Identifier", "name": "spender"}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_transfer"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "to"}, {"type": "Identifier", "name": "value"}], "names": []}}, {"type": "BooleanLiteral", "value": true}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "approve", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "spender"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}, "right": {"type": "Identifier", "name": "value"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Approval"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "spender"}, {"type": "Identifier", "name": "value"}], "names": []}}, {"type": "BooleanLiteral", "value": true}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "transferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "from"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "from"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_transfer"}, "arguments": [{"type": "Identifier", "name": "from"}, {"type": "Identifier", "name": "to"}, {"type": "Identifier", "name": "value"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Approval"}, "arguments": [{"type": "Identifier", "name": "from"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "from"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}], "names": []}}, {"type": "BooleanLiteral", "value": true}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "increaseAllowance", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "addedValue", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "spender"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}, "memberName": "add"}, "arguments": [{"type": "Identifier", "name": "addedValue"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Approval"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "spender"}, {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}], "names": []}}, {"type": "BooleanLiteral", "value": true}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "decreaseAllowance", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "subtractedValue", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "spender"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "subtractedValue"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Approval"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "spender"}, {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "index": {"type": "Identifier", "name": "spender"}}], "names": []}}, {"type": "BooleanLiteral", "value": true}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "to"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "from"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "from"}}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "to"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "to"}}, "memberName": "add"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Transfer"}, "arguments": [{"type": "Identifier", "name": "from"}, {"type": "Identifier", "name": "to"}, {"type": "Identifier", "name": "value"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_mint", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "account"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "_totalSupply"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_totalSupply"}, "memberName": "add"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "account"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "account"}}, "memberName": "add"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Transfer"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}, {"type": "Identifier", "name": "account"}, {"type": "Identifier", "name": "value"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_burn", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "account"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "_totalSupply"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_totalSupply"}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "account"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_balances"}, "index": {"type": "Identifier", "name": "account"}}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Transfer"}, "arguments": [{"type": "Identifier", "name": "account"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}, {"type": "Identifier", "name": "value"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_burnFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "account", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "account"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "account"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, "memberName": "sub"}, "arguments": [{"type": "Identifier", "name": "value"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_burn"}, "arguments": [{"type": "Identifier", "name": "account"}, {"type": "Identifier", "name": "value"}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Approval"}, "arguments": [{"type": "Identifier", "name": "account"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "IndexAccess", "base": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_allowed"}, "index": {"type": "Identifier", "name": "account"}}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "IERC165", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "supportsInterface", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "interfaceId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "interface"}, {"type": "ContractDefinition", "name": "ERC165", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "IERC165"}, "arguments": []}], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "_INTERFACE_ID_ERC165", "expression": {"type": "NumberLiteral", "number": "0x01ffc9a7", "subdenomination": null}, "visibility": "private", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "0x01ffc9a7", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes4"}, "valueType": {"type": "ElementaryTypeName", "name": "bool"}}, "name": "_supportedInterfaces", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_registerInterface"}, "arguments": [{"type": "Identifier", "name": "_INTERFACE_ID_ERC165"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "supportsInterface", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "interfaceId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_supportedInterfaces"}, "index": {"type": "Identifier", "name": "interfaceId"}}]}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "_registerInterface", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes4"}, "name": "interfaceId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "interfaceId"}, "right": {"type": "NumberLiteral", "number": "0xffffffff", "subdenomination": null}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_supportedInterfaces"}, "index": {"type": "Identifier", "name": "interfaceId"}}, "right": {"type": "BooleanLiteral", "value": true}}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "TransferrableToken", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "ERC165"}, "arguments": []}], "subNodes": [{"type": "FunctionDefinition", "name": "transferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_valueOrTokenId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "approve", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "PriorityQueue", "baseContracts": [], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "libraryName": "SafeMath"}, {"type": "StructDefinition", "name": "Token", "members": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TransferrableToken"}, "name": "addr", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "heapList", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "currentSize", "storageLocation": null}]}, {"type": "FunctionDefinition", "name": "insert", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Token"}, "name": "self", "storageLocation": "storage", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "k", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "memberName": "push"}, "arguments": [{"type": "Identifier", "name": "k"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}, "memberName": "add"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "percUp"}, "arguments": [{"type": "Identifier", "name": "self"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "minChild", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Token"}, "name": "self", "storageLocation": "storage", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "mul"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}, "memberName": "add"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}}, "TrueBody": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "mul"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}]}, "FalseBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "mul"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}}, "right": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "mul"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}, "memberName": "add"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}}, "TrueBody": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "mul"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}]}, "FalseBody": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "mul"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}, "memberName": "add"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}]}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getMin", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Token"}, "name": "self", "storageLocation": "storage", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "delMin", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Token"}, "name": "self", "storageLocation": "storage", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "retVal", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "right": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}}, "isPrefix": true}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}, "memberName": "sub"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "percDown"}, "arguments": [{"type": "Identifier", "name": "self"}, {"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "memberName": "length"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "memberName": "length"}, "memberName": "sub"}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}}, {"type": "Identifier", "name": "retVal"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "percUp", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Token"}, "name": "self", "storageLocation": "storage", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "j", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "i"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "newVal", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "WhileStatement", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "newVal"}, "right": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "div"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "div"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "i"}, "memberName": "div"}, "arguments": [{"type": "NumberLiteral", "number": "2", "subdenomination": null}], "names": []}}}]}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "j"}}, "TrueBody": {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "Identifier", "name": "newVal"}}}, "FalseBody": null}]}, "visibility": "private", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "percDown", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Token"}, "name": "self", "storageLocation": "storage", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "j", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "i"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "newVal", "storageLocation": null}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "i"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "mc", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "minChild"}, "arguments": [{"type": "Identifier", "name": "self"}, {"type": "Identifier", "name": "i"}], "names": []}}, {"type": "WhileStatement", "condition": {"type": "BinaryOperation", "operator": "&&", "left": {"type": "BinaryOperation", "operator": "<=", "left": {"type": "Identifier", "name": "mc"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "currentSize"}}, "right": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "newVal"}, "right": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "mc"}}}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "mc"}}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "mc"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "mc"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "minChild"}, "arguments": [{"type": "Identifier", "name": "self"}, {"type": "Identifier", "name": "i"}], "names": []}}}]}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "j"}}, "TrueBody": {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "self"}, "memberName": "heapList"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "Identifier", "name": "newVal"}}}, "FalseBody": null}]}, "visibility": "private", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "library"}, {"type": "ContractDefinition", "name": "IERC1948", "baseContracts": [], "subNodes": [{"type": "EventDefinition", "name": "DataUpdated", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "tokenId", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "oldData", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "newData", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": "readData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "tokenId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "writeData", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "tokenId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "newData", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "interface"}, {"type": "ContractDefinition", "name": "Vault", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "Adminable"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "PriorityQueue.Token"}, "libraryName": "PriorityQueue"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "NFT_FIRST_COLOR", "expression": {"type": "NumberLiteral", "number": "32769", "subdenomination": null}, "visibility": "default", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "32769", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "NST_FIRST_COLOR", "expression": {"type": "NumberLiteral", "number": "49153", "subdenomination": null}, "visibility": "default", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "49153", "subdenomination": null}}, {"type": "EventDefinition", "name": "NewToken", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "tokenAddr", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "color", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Bridge"}, "name": "bridge", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "erc20TokenCount", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "nftTokenCount", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "nstTokenCount", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "uint16"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "PriorityQueue.Token"}}, "name": "tokens", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "address"}, "valueType": {"type": "ElementaryTypeName", "name": "bool"}}, "name": "tokenColors", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "initialize", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Bridge"}, "name": "_bridge", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "bridge"}, "right": {"type": "Identifier", "name": "_bridge"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "initializer", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getTokenAddr", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "Identifier", "name": "_color"}}, "memberName": "addr"}], "names": []}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "registerToken", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_token", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_type", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_token"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "Tried to register 0x0 address"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "UnaryOperation", "operator": "!", "subExpression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokenColors"}, "index": {"type": "Identifier", "name": "_token"}}, "isPrefix": true}, {"type": "StringLiteral", "value": "Token already registered"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "color", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_type"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ERC20"}, "arguments": [{"type": "Identifier", "name": "_token"}], "names": []}, "memberName": "totalSupply"}, "arguments": [], "names": []}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "Not an ERC20 token"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "color"}, "right": {"type": "Identifier", "name": "erc20TokenCount"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "erc20TokenCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_type"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "nftTokenCount"}, "right": {"type": "NumberLiteral", "number": "0x4000", "subdenomination": null}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TransferrableToken"}, "arguments": [{"type": "Identifier", "name": "_token"}], "names": []}, "memberName": "supportsInterface"}, "arguments": [{"type": "NumberLiteral", "number": "0x80ac58cd", "subdenomination": null}], "names": []}, "right": {"type": "BooleanLiteral", "value": true}}, {"type": "StringLiteral", "value": "Not an ERC721 token"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "color"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "NFT_FIRST_COLOR"}, "right": {"type": "Identifier", "name": "nftTokenCount"}}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "nftTokenCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "nstTokenCount"}, "right": {"type": "NumberLiteral", "number": "0x3ffe", "subdenomination": null}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TransferrableToken"}, "arguments": [{"type": "Identifier", "name": "_token"}], "names": []}, "memberName": "supportsInterface"}, "arguments": [{"type": "NumberLiteral", "number": "0x80ac58cd", "subdenomination": null}], "names": []}, "right": {"type": "BooleanLiteral", "value": true}}, {"type": "StringLiteral", "value": "Not an ERC721 token"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "color"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "NST_FIRST_COLOR"}, "right": {"type": "Identifier", "name": "nstTokenCount"}}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "nstTokenCount"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}]}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}, "name": "arr", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": null}}, "arguments": [{"type": "NumberLiteral", "number": "1", "subdenomination": null}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokenColors"}, "index": {"type": "Identifier", "name": "_token"}}, "right": {"type": "BooleanLiteral", "value": true}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "Identifier", "name": "color"}}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "PriorityQueue"}, "memberName": "Token"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TransferrableToken"}, "arguments": [{"type": "Identifier", "name": "_token"}], "names": []}, {"type": "Identifier", "name": "arr"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": ["addr", "heapList", "currentSize"]}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "NewToken"}, "arguments": [{"type": "Identifier", "name": "_token"}, {"type": "Identifier", "name": "color"}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "ifAdmin", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": {"type": "NumberLiteral", "number": "49", "subdenomination": null}}, "name": "______gap", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "DepositHandler", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "Vault"}, "arguments": []}], "subNodes": [{"type": "EventDefinition", "name": "NewDeposit", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "depositId", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "depositor", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "color", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "amount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "MinGasPrice", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "minGasPrice", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "NewDepositV2", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "depositId", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "depositor", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "color", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "amount", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "data", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "StructDefinition", "name": "Deposit", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint64"}, "name": "time", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "color", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "amount", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "depositCount", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "minGasPrice", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "uint32"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Deposit"}}, "name": "deposits", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "uint32"}, "valueType": {"type": "ElementaryTypeName", "name": "bytes32"}}, "name": "tokenData", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "setMinGasPrice", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_minGasPrice", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "minGasPrice"}, "right": {"type": "Identifier", "name": "_minGasPrice"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "MinGasPrice"}, "arguments": [{"type": "Identifier", "name": "minGasPrice"}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "ifAdmin", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "deposit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amountOrTokenId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_owner"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, {"type": "StringLiteral", "value": "owner different from msg.sender"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_deposit"}, "arguments": [{"type": "Identifier", "name": "_amountOrTokenId"}, {"type": "Identifier", "name": "_color"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "depositBySender", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amountOrTokenId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "_deposit"}, "arguments": [{"type": "Identifier", "name": "_amountOrTokenId"}, {"type": "Identifier", "name": "_color"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "_deposit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_amountOrTokenId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TransferrableToken"}, "name": "token", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "Identifier", "name": "_color"}}, "memberName": "addr"}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "token"}], "names": []}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "StringLiteral", "value": "Token color already registered"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "_amountOrTokenId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "right": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "_color"}, "right": {"type": "NumberLiteral", "number": "32769", "subdenomination": null}}}, {"type": "StringLiteral", "value": "no 0 deposits for fungible tokens"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tokenData", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "_color"}, "right": {"type": "Identifier", "name": "NST_FIRST_COLOR"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "IERC1948"}, "name": "nst", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "IERC1948"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "token"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "_tokenData"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "nst"}, "memberName": "readData"}, "arguments": [{"type": "Identifier", "name": "_amountOrTokenId"}], "names": []}}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "token"}, "memberName": "transferFrom"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "Identifier", "name": "_amountOrTokenId"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "tipHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "tipHash"}, "arguments": [], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "timestamp", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "timestamp"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "periods"}, "arguments": [{"type": "Identifier", "name": "tipHash"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "depositCount"}, "isPrefix": false}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "deposits"}, "index": {"type": "Identifier", "name": "depositCount"}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Deposit"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "Identifier", "name": "timestamp"}], "names": []}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_color"}, {"type": "Identifier", "name": "_amountOrTokenId"}], "names": ["time", "owner", "color", "amount"]}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "_color"}, "right": {"type": "Identifier", "name": "NST_FIRST_COLOR"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokenData"}, "index": {"type": "Identifier", "name": "depositCount"}}, "right": {"type": "Identifier", "name": "_tokenData"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "NewDepositV2"}, "arguments": [{"type": "Identifier", "name": "depositCount"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_color"}, {"type": "Identifier", "name": "_amountOrTokenId"}, {"type": "Identifier", "name": "_tokenData"}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "NewDeposit"}, "arguments": [{"type": "Identifier", "name": "depositCount"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_color"}, {"type": "Identifier", "name": "_amountOrTokenId"}], "names": []}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": {"type": "NumberLiteral", "number": "49", "subdenomination": null}}, "name": "______gap", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "IExitHandler", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "startExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": null, "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": null, "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}], "kind": "contract"}, {"type": "ContractDefinition", "name": "TxLib", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "WORD_SIZE", "expression": {"type": "NumberLiteral", "number": "32", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "32", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "ONES", "expression": {"type": "UnaryOperation", "operator": "~", "subExpression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}, "isPrefix": true}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "UnaryOperation", "operator": "~", "subExpression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}, "isPrefix": true}}, {"type": "EnumDefinition", "name": "TxType", "members": [{"type": "EnumValue", "name": "None0"}, {"type": "EnumValue", "name": "None1"}, {"type": "EnumValue", "name": "Deposit"}, {"type": "EnumValue", "name": "Transfer"}, {"type": "EnumValue", "name": "None4"}, {"type": "EnumValue", "name": "None5"}, {"type": "EnumValue", "name": "None6"}, {"type": "EnumValue", "name": "None7"}, {"type": "EnumValue", "name": "None8"}, {"type": "EnumValue", "name": "None9"}, {"type": "EnumValue", "name": "None10"}, {"type": "EnumValue", "name": "None11"}, {"type": "EnumValue", "name": "None12"}, {"type": "EnumValue", "name": "SpendCond"}]}, {"type": "StructDefinition", "name": "Outpoint", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "hash", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "pos", "storageLocation": null}]}, {"type": "StructDefinition", "name": "Input", "members": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Outpoint"}, "name": "outpoint", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "r", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "s", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "v", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "script", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "msgData", "storageLocation": null}]}, {"type": "StructDefinition", "name": "Output", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "color", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "stateRoot", "storageLocation": null}]}, {"type": "StructDefinition", "name": "Tx", "members": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxType"}, "name": "txType", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Input"}, "length": null}, "name": "ins", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Output"}, "length": null}, "name": "outs", "storageLocation": null}]}, {"type": "FunctionDefinition", "name": "parseInput", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxType"}, "name": "_type", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_txData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_pos", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "offset", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Input"}, "length": null}, "name": "_ins", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "newOffset", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "inputData", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "index", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_type"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxType"}, "memberName": "Deposit"}}, "TrueBody": {"type": "Block", "statements": [{"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "inputData"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "4"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "inputData"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "inputData"}], "names": []}], "names": []}], "names": []}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "index"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "newOffset"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "NumberLiteral", "number": "4", "subdenomination": null}}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "inputData"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "index"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "33"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "newOffset"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "NumberLiteral", "number": "33", "subdenomination": null}}}}]}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Outpoint"}, "name": "outpoint", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Outpoint"}, "arguments": [{"type": "Identifier", "name": "inputData"}, {"type": "Identifier", "name": "index"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "data", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Input"}, "name": "input", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Input"}, "arguments": [{"type": "Identifier", "name": "outpoint"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "Identifier", "name": "data"}, {"type": "Identifier", "name": "data"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_type"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxType"}, "memberName": "SpendCond"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "len", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "len"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "35"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "data"}, "right": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "Identifier", "name": "len"}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "src", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "dest", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "src"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "35"}]}, {"type": "HexNumber", "value": "0x20"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "dest"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "data", "arguments": []}, {"type": "HexNumber", "value": "0x20"}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "memcopy"}, "arguments": [{"type": "Identifier", "name": "src"}, {"type": "Identifier", "name": "dest"}, {"type": "Identifier", "name": "len"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "input"}, "memberName": "msgData"}, "right": {"type": "Identifier", "name": "data"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "newOffset"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "NumberLiteral", "number": "37", "subdenomination": null}}, "right": {"type": "Identifier", "name": "len"}}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "len"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "newOffset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "data"}, "right": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "Identifier", "name": "len"}], "names": []}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "src"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "newOffset", "arguments": []}, {"type": "DecimalNumber", "value": "0"}]}, {"type": "HexNumber", "value": "0x20"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "dest"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "data", "arguments": []}, {"type": "HexNumber", "value": "0x20"}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "memcopy"}, "arguments": [{"type": "Identifier", "name": "src"}, {"type": "Identifier", "name": "dest"}, {"type": "Identifier", "name": "len"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "input"}, "memberName": "script"}, "right": {"type": "Identifier", "name": "data"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "newOffset"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "newOffset"}, "right": {"type": "Identifier", "name": "len"}}}}]}, "FalseBody": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_type"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxType"}, "memberName": "Transfer"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "r", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "s", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "v", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "r"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "65"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "s"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "97"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "v"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "98"}]}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "input"}, "memberName": "r"}, "right": {"type": "Identifier", "name": "r"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "input"}, "memberName": "s"}, "right": {"type": "Identifier", "name": "s"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "input"}, "memberName": "v"}, "right": {"type": "Identifier", "name": "v"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "newOffset"}, "right": {"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "NumberLiteral", "number": "33", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "65", "subdenomination": null}}}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_ins"}, "index": {"type": "Identifier", "name": "_pos"}}, "right": {"type": "Identifier", "name": "input"}}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "memcopy", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "srcPtr", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "destPtr", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "len", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offset", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "size", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "len"}, "right": {"type": "Identifier", "name": "WORD_SIZE"}}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "size"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "WORD_SIZE"}}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "destPtr", "arguments": []}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "srcPtr", "arguments": []}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "size"}, "right": {"type": "Identifier", "name": "WORD_SIZE"}}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "mask", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "ONES"}, "right": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "8", "subdenomination": null}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "-", "left": {"type": "NumberLiteral", "number": "32", "subdenomination": null}, "right": {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "len"}, "right": {"type": "Identifier", "name": "WORD_SIZE"}}}], "isArray": false}}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "nSrc"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "srcPtr", "arguments": []}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}}, {"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "nDest"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "destPtr", "arguments": []}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}}, {"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "AssemblyExpression", "functionName": "nDest", "arguments": []}, {"type": "AssemblyExpression", "functionName": "or", "arguments": [{"type": "AssemblyExpression", "functionName": "and", "arguments": [{"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "nSrc", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "mask", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "and", "arguments": [{"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "nDest", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "not", "arguments": [{"type": "AssemblyExpression", "functionName": "mask", "arguments": []}]}]}]}]}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "parseOutput", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_txData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_pos", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "offset", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Output"}, "length": null}, "name": "_outs", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "value", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "color", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "data", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "offset"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "value"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "offset"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "2"}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "color"}], "expression": {"type": "AssemblyExpression", "functionName": "and", "arguments": [{"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}, {"type": "HexNumber", "value": "0xffff"}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "offset"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "20"}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "owner"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}, {"type": "AssemblyIf", "condition": {"type": "AssemblyExpression", "functionName": "gt", "arguments": [{"type": "AssemblyExpression", "functionName": "color", "arguments": []}, {"type": "DecimalNumber", "value": "49152"}]}, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "offset"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "data"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}]}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Output"}, "name": "output", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Output"}, "arguments": [{"type": "Identifier", "name": "value"}, {"type": "Identifier", "name": "color"}, {"type": "Identifier", "name": "owner"}, {"type": "Identifier", "name": "data"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_outs"}, "index": {"type": "Identifier", "name": "_pos"}}, "right": {"type": "Identifier", "name": "output"}}}, {"type": "Identifier", "name": "offset"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "parseTx", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_txData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Tx"}, "name": "txn", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxType"}, "name": "txType", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "a"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "HexNumber", "value": "0x20"}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "BinaryOperation", "operator": ">>", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "248", "subdenomination": null}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxType"}, "memberName": "Deposit"}}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "3", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxType"}, "memberName": "Transfer"}}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "13", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxType"}, "memberName": "SpendCond"}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "revert"}, "arguments": [{"type": "StringLiteral", "value": "unknown tx type"}], "names": []}}]}}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "a"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "HexNumber", "value": "0x21"}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "BinaryOperation", "operator": ">>", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "252", "subdenomination": null}}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Input"}, "length": null}, "name": "ins", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Input"}, "length": null}}, "arguments": [{"type": "Identifier", "name": "a"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "offset", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "ins"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "parseInput"}, "arguments": [{"type": "Identifier", "name": "txType"}, {"type": "Identifier", "name": "_txData"}, {"type": "Identifier", "name": "i"}, {"type": "Identifier", "name": "offset"}, {"type": "Identifier", "name": "ins"}], "names": []}}}]}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "a"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "HexNumber", "value": "0x21"}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "BinaryOperation", "operator": "&", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": ">>", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "248", "subdenomination": null}}], "isArray": false}, "right": {"type": "NumberLiteral", "number": "0x0f", "subdenomination": null}}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Output"}, "length": null}, "name": "outs", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "UserDefinedTypeName", "namePath": "Output"}, "length": null}}, "arguments": [{"type": "Identifier", "name": "a"}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "outs"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "parseOutput"}, "arguments": [{"type": "Identifier", "name": "_txData"}, {"type": "Identifier", "name": "i"}, {"type": "Identifier", "name": "offset"}, {"type": "Identifier", "name": "outs"}], "names": []}}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txn"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Tx"}, "arguments": [{"type": "Identifier", "name": "txType"}, {"type": "Identifier", "name": "ins"}, {"type": "Identifier", "name": "outs"}], "names": []}}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "getSigHash", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "_txData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "sigHash", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "a", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "a"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "HexNumber", "value": "0x20"}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "BinaryOperation", "operator": ">>", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "248", "subdenomination": null}}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "3", "subdenomination": null}}], "names": []}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "a"}], "expression": {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "HexNumber", "value": "0x21"}, {"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "BinaryOperation", "operator": ">>", "left": {"type": "Identifier", "name": "a"}, "right": {"type": "NumberLiteral", "number": "252", "subdenomination": null}}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "sigData", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_txData"}, "memberName": "length"}], "names": []}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "mstore8", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "sigData", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}, {"type": "AssemblyExpression", "functionName": "byte", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}]}]}]}, {"type": "AssemblyExpression", "functionName": "mstore8", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "sigData", "arguments": []}, {"type": "DecimalNumber", "value": "33"}]}, {"type": "AssemblyExpression", "functionName": "byte", "arguments": [{"type": "DecimalNumber", "value": "1"}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}]}]}]}, {"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "offset"}], "expression": {"type": "DecimalNumber", "value": "0"}}, {"type": "AssemblyFor", "pre": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "i"}], "expression": {"type": "DecimalNumber", "value": "0"}}]}, "condition": {"type": "AssemblyExpression", "functionName": "lt", "arguments": [{"type": "AssemblyExpression", "functionName": "i", "arguments": []}, {"type": "AssemblyExpression", "functionName": "a", "arguments": []}]}, "post": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "i"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "i", "arguments": []}, {"type": "DecimalNumber", "value": "1"}]}}]}, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "sigData", "arguments": []}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "34"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "34"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}]}]}, {"type": "AssemblyExpression", "functionName": "mstore8", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "sigData", "arguments": []}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "66"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}, {"type": "AssemblyExpression", "functionName": "byte", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "66"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}]}]}]}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "offset"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "33"}, {"type": "DecimalNumber", "value": "65"}]}]}}]}}, {"type": "AssemblyFor", "pre": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyLocalDefinition", "names": [{"type": "Identifier", "name": "i"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "34"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}}]}, "condition": {"type": "AssemblyExpression", "functionName": "lt", "arguments": [{"type": "AssemblyExpression", "functionName": "i", "arguments": []}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "64"}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}]}]}]}, "post": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "i"}], "expression": {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "i", "arguments": []}, {"type": "HexNumber", "value": "0x20"}]}}]}, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "sigData", "arguments": []}, {"type": "AssemblyExpression", "functionName": "i", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "mload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "_txData", "arguments": []}, {"type": "AssemblyExpression", "functionName": "i", "arguments": []}]}]}]}]}}]}}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodePacked"}, "arguments": [{"type": "StringLiteral", "value": "\\x19Ethereum Signed Message:\\n"}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "uint2str"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_txData"}, "memberName": "length"}], "names": []}, {"type": "Identifier", "name": "sigData"}], "names": []}], "names": []}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "getMerkleRoot", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_leaf", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_index", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_offset", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_proof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "temp", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "_offset"}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_proof"}, "memberName": "length"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "temp"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "Identifier", "name": "i"}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "_index"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "_leaf", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "HexNumber", "value": "0x20"}, {"type": "AssemblyExpression", "functionName": "temp", "arguments": []}]}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "_leaf"}], "expression": {"type": "AssemblyExpression", "functionName": "keccak256", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "HexNumber", "value": "0x40"}]}}]}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "AssemblyExpression", "functionName": "temp", "arguments": []}]}, {"type": "AssemblyExpression", "functionName": "mstore", "arguments": [{"type": "HexNumber", "value": "0x20"}, {"type": "AssemblyExpression", "functionName": "_leaf", "arguments": []}]}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "_leaf"}], "expression": {"type": "AssemblyExpression", "functionName": "keccak256", "arguments": [{"type": "DecimalNumber", "value": "0"}, {"type": "HexNumber", "value": "0x40"}]}}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "_index"}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "_index"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}}}]}}, {"type": "Identifier", "name": "_leaf"}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "validateProof", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_cdOffset", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_proof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint64"}, "name": "txPos", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "txData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "offset", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "BinaryOperation", "operator": ">>", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "248", "subdenomination": null}}], "names": []}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "txLength", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "BinaryOperation", "operator": ">>", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "224", "subdenomination": null}}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txData"}, "right": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "Identifier", "name": "txLength"}], "names": []}}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "calldatacopy", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "txData", "arguments": []}, {"type": "HexNumber", "value": "0x20"}]}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "68"}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "offset", "arguments": []}, {"type": "AssemblyExpression", "functionName": "_cdOffset", "arguments": []}]}]}, {"type": "AssemblyExpression", "functionName": "txLength", "arguments": []}]}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txHash"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "keccak256"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txPos"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint64"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "BinaryOperation", "operator": ">>", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "160", "subdenomination": null}}], "names": []}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "root", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getMerkleRoot"}, "arguments": [{"type": "Identifier", "name": "txHash"}, {"type": "Identifier", "name": "txPos"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "BinaryOperation", "operator": ">>", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "240", "subdenomination": null}}], "names": []}], "names": []}, {"type": "Identifier", "name": "_proof"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "root"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "recoverTxSigner", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "offset", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_proof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "dest", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "txLength", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "BinaryOperation", "operator": ">>", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, "right": {"type": "NumberLiteral", "number": "224", "subdenomination": null}}], "names": []}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "txData", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "Identifier", "name": "txLength"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "r", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "s", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "v", "storageLocation": null}], "initialValue": null}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyExpression", "functionName": "calldatacopy", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "txData", "arguments": []}, {"type": "DecimalNumber", "value": "32"}]}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "114"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}, {"type": "DecimalNumber", "value": "43"}]}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "r"}], "expression": {"type": "AssemblyExpression", "functionName": "calldataload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "157"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "s"}], "expression": {"type": "AssemblyExpression", "functionName": "calldataload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "189"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}}, {"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "v"}], "expression": {"type": "AssemblyExpression", "functionName": "calldataload", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "190"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}]}}, {"type": "AssemblyExpression", "functionName": "calldatacopy", "arguments": [{"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "AssemblyExpression", "functionName": "txData", "arguments": []}, {"type": "DecimalNumber", "value": "140"}]}, {"type": "AssemblyExpression", "functionName": "add", "arguments": [{"type": "DecimalNumber", "value": "222"}, {"type": "AssemblyExpression", "functionName": "offset", "arguments": []}]}, {"type": "DecimalNumber", "value": "28"}]}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "dest"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ecrecover"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getSigHash"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}, {"type": "Identifier", "name": "v"}, {"type": "Identifier", "name": "r"}, {"type": "Identifier", "name": "s"}], "names": []}}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "uint2str", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_i", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "string"}, "name": "_uintAsString", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_i"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "StringLiteral", "value": "0"}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "j", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "_i"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "len", "storageLocation": null}], "initialValue": null}, {"type": "WhileStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "j"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "len"}, "isPrefix": false}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "/=", "left": {"type": "Identifier", "name": "j"}, "right": {"type": "NumberLiteral", "number": "10", "subdenomination": null}}}]}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "bstr", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}}, "arguments": [{"type": "Identifier", "name": "len"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "k", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "len"}, "right": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}}, {"type": "WhileStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "_i"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "bstr"}, "index": {"type": "UnaryOperation", "operator": "--", "subExpression": {"type": "Identifier", "name": "k"}, "isPrefix": false}}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "byte"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "NumberLiteral", "number": "48", "subdenomination": null}, "right": {"type": "BinaryOperation", "operator": "%", "left": {"type": "Identifier", "name": "_i"}, "right": {"type": "NumberLiteral", "number": "10", "subdenomination": null}}}], "names": []}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "/=", "left": {"type": "Identifier", "name": "_i"}, "right": {"type": "NumberLiteral", "number": "10", "subdenomination": null}}}]}}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "string"}}, "arguments": [{"type": "Identifier", "name": "bstr"}], "names": []}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}], "kind": "library"}, {"type": "ContractDefinition", "name": "ExitHandler", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "IExitHandler"}, "arguments": []}, {"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "DepositHandler"}, "arguments": []}], "subNodes": [{"type": "UsingForDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "PriorityQueue.Token"}, "libraryName": "PriorityQueue"}, {"type": "EventDefinition", "name": "ExitStarted", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "outIndex", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "color", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "exitor", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "amount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "StructDefinition", "name": "Exit", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "amount", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "color", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "finalized", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "priorityTimestamp", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "stake", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "tokenData", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "exitDuration", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "exitStake", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "nftExitCounter", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "nstExitCounter", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes32"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Exit"}}, "name": "exits", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": "initializeWithExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "Bridge"}, "name": "_bridge", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_exitDuration", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_exitStake", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "initialize"}, "arguments": [{"type": "Identifier", "name": "_bridge"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "exitDuration"}, "right": {"type": "Identifier", "name": "_exitDuration"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "exitStake"}, "right": {"type": "Identifier", "name": "_exitStake"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "MinGasPrice"}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "initializer", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "setExitStake", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_exitStake", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "exitStake"}, "right": {"type": "Identifier", "name": "_exitStake"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "ifAdmin", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "setExitDuration", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_exitDuration", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "exitDuration"}, "right": {"type": "Identifier", "name": "_exitDuration"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "ifAdmin", "arguments": []}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "startExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_youngestInputProof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_proof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_outputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_inputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "Identifier", "name": "exitStake"}}, {"type": "StringLiteral", "value": "Not enough ether sent to pay for exit stake"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "timestamp", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "timestamp"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "periods"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "timestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The referenced period was not submitted to bridge"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_youngestInputProof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "timestamp"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "periods"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_youngestInputProof"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "timestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The referenced period was not submitted to bridge"}], "names": []}}]}, "FalseBody": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "txData", "storageLocation": "memory"}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint64"}, "name": "txPos", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "txPos"}, {"type": "Identifier", "name": "txHash"}, {"type": "Identifier", "name": "txData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "32", "subdenomination": null}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_youngestInputProof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}}, "right": {"type": "NumberLiteral", "number": "64", "subdenomination": null}}, {"type": "Identifier", "name": "_proof"}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxLib.Tx"}, "name": "exitingTx", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "parseTx"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxLib.Output"}, "name": "out", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "exitingTx"}, "memberName": "outs"}, "index": {"type": "Identifier", "name": "_outputIndex"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "BinaryOperation", "operator": "|", "left": {"type": "BinaryOperation", "operator": "<<", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "_outputIndex"}], "names": []}, "right": {"type": "NumberLiteral", "number": "120", "subdenomination": null}}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint120"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "txHash"}], "names": []}], "names": []}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "priority", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "owner"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "a", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, {"type": "InLineAssemblyStatement", "language": null, "body": {"type": "AssemblyBlock", "operations": [{"type": "AssemblyAssignment", "names": [{"type": "Identifier", "name": "priority"}], "expression": {"type": "AssemblyExpression", "functionName": "extcodehash", "arguments": [{"type": "AssemblyExpression", "functionName": "a", "arguments": []}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "!=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "caller not contract"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes20"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "owner"}], "names": []}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ripemd160"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encode"}, "arguments": [{"type": "Identifier", "name": "priority"}], "names": []}], "names": []}}, {"type": "StringLiteral", "value": "Only UTXO owner or contract can start exit"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "owner"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "value"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "UTXO has no value"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The exit for UTXO has already been started"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "UnaryOperation", "operator": "!", "subExpression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "finalized"}, "isPrefix": true}, {"type": "StringLiteral", "value": "The exit for UTXO has already been finalized"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_youngestInputProof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "inputTxHash", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "txPos"}, {"type": "Identifier", "name": "inputTxHash"}, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "NumberLiteral", "number": "96", "subdenomination": null}, {"type": "Identifier", "name": "_youngestInputProof"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "inputTxHash"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "exitingTx"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "outpoint"}, "memberName": "hash"}}, {"type": "StringLiteral", "value": "Input from the proof is not referenced in exiting tx"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNft"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "nftExitCounter"}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "nftExitCounter"}, "isPrefix": false}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNST"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "nstExitCounter"}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "nstExitCounter"}, "isPrefix": false}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getERC20ExitPriority"}, "arguments": [{"type": "Identifier", "name": "timestamp"}, {"type": "Identifier", "name": "utxoId"}, {"type": "Identifier", "name": "txPos"}], "names": []}}}]}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "exitingTx"}, "memberName": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "TxType"}, "memberName": "Deposit"}}, {"type": "StringLiteral", "value": "Expected deposit tx"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNft"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "nftExitCounter"}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "nftExitCounter"}, "isPrefix": false}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNST"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "nstExitCounter"}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "nstExitCounter"}, "isPrefix": false}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getERC20ExitPriority"}, "arguments": [{"type": "Identifier", "name": "timestamp"}, {"type": "Identifier", "name": "utxoId"}, {"type": "Identifier", "name": "txPos"}], "names": []}}}]}}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}}, "memberName": "insert"}, "arguments": [{"type": "Identifier", "name": "priority"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Exit"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "value"}, {"type": "BooleanLiteral", "value": false}, {"type": "Identifier", "name": "exitStake"}, {"type": "Identifier", "name": "timestamp"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "stateRoot"}], "names": ["owner", "color", "amount", "finalized", "stake", "priorityTimestamp", "tokenData"]}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ExitStarted"}, "arguments": [{"type": "Identifier", "name": "txHash"}, {"type": "Identifier", "name": "_outputIndex"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "color"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "out"}, "memberName": "value"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "startDepositExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_depositId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "Identifier", "name": "exitStake"}}, {"type": "StringLiteral", "value": "Not enough ether sent to pay for exit stake"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Deposit"}, "name": "deposit", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "deposits"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "owner"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, {"type": "StringLiteral", "value": "Only deposit owner can start exit"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "deposit has no value"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The exit of deposit has already been started"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "UnaryOperation", "operator": "!", "subExpression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}}, "memberName": "finalized"}, "isPrefix": true}, {"type": "StringLiteral", "value": "The exit for deposit has already been finalized"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "priority", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNft"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "nftExitCounter"}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "nftExitCounter"}, "isPrefix": false}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNST"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "nstExitCounter"}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}}}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "nstExitCounter"}, "isPrefix": false}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getERC20ExitPriority"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "time"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}}]}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}}, "memberName": "insert"}, "arguments": [{"type": "Identifier", "name": "priority"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Exit"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "amount"}, {"type": "BooleanLiteral", "value": false}, {"type": "Identifier", "name": "exitStake"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "Identifier", "name": "now"}], "names": []}, {"type": "StringLiteral", "value": "0x"}], "names": ["owner", "color", "amount", "finalized", "stake", "priorityTimestamp", "tokenData"]}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ExitStarted"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "Identifier", "name": "_depositId"}], "names": []}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "amount"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "finalizeExits", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "exitableAt", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Exit"}, "name": "currentExit", "storageLocation": "memory"}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "utxoId"}, {"type": "Identifier", "name": "exitableAt"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextExit"}, "arguments": [{"type": "Identifier", "name": "_color"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "Identifier", "name": "_color"}}, "memberName": "currentSize"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "Queue empty for color."}], "names": []}}, {"type": "ForStatement", "initExpression": {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "20", "subdenomination": null}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "exitableAt"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "timestamp"}}, "TrueBody": {"type": "Block", "statements": [null]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "currentExit"}, "right": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "||", "left": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "owner"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}, "right": {"type": "BinaryOperation", "operator": "!=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, "TrueBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNft"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "addr"}, "memberName": "transferFrom"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}], "names": []}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNST"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "tokenData", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "tokenData"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "tokenAddr", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "addr"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "success", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "success"}, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "tokenAddr"}, "memberName": "call"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodeWithSignature"}, "arguments": [{"type": "StringLiteral", "value": "writeData(uint256,bytes32)"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}, {"type": "Identifier", "name": "tokenData"}], "names": []}], "names": []}}}, {"type": "IfStatement", "condition": {"type": "UnaryOperation", "operator": "!", "subExpression": {"type": "Identifier", "name": "success"}, "isPrefix": true}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "tokenAddr"}, "memberName": "call"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "abi"}, "memberName": "encodeWithSignature"}, "arguments": [{"type": "StringLiteral", "value": "breed(uint256,address,bytes32)"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "owner"}, {"type": "Identifier", "name": "tokenData"}], "names": []}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "addr"}, "memberName": "transferFrom"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}], "names": []}}]}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "addr"}, "memberName": "approve"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "addr"}, "memberName": "transferFrom"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "owner"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "amount"}], "names": []}}]}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint160"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "owner"}], "names": []}], "names": []}, "memberName": "send"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "stake"}], "names": []}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "delMin"}, "arguments": [], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "finalized"}, "right": {"type": "BooleanLiteral", "value": true}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "currentExit"}, "memberName": "color"}}, "memberName": "currentSize"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "utxoId"}, {"type": "Identifier", "name": "exitableAt"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextExit"}, "arguments": [{"type": "Identifier", "name": "_color"}], "names": []}}}]}, "FalseBody": {"type": "Block", "statements": [null]}}]}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "finalizeTopExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "finalizeExits"}, "arguments": [{"type": "Identifier", "name": "_color"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "challengeExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_proof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_prevProof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_outputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_inputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "challenger", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "challenger"}}, {"type": "StringLiteral", "value": "Wrong challenger"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "offset", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "32", "subdenomination": null}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_proof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash1", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "txData", "storageLocation": "memory"}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "txHash1"}, {"type": "Identifier", "name": "txData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "offset"}, "right": {"type": "NumberLiteral", "number": "96", "subdenomination": null}}, {"type": "Identifier", "name": "_prevProof"}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "BinaryOperation", "operator": "|", "left": {"type": "BinaryOperation", "operator": "<<", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "_outputIndex"}], "names": []}, "right": {"type": "NumberLiteral", "number": "120", "subdenomination": null}}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint120"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "txHash1"}], "names": []}], "names": []}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxLib.Tx"}, "name": "txn", "storageLocation": "memory"}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_proof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "txHash"}, {"type": "Identifier", "name": "txData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "NumberLiteral", "number": "128", "subdenomination": null}, {"type": "Identifier", "name": "_proof"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txn"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "parseTx"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "txHash1"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "outpoint"}, "memberName": "hash"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "_outputIndex"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "outpoint"}, "memberName": "pos"}}], "names": []}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "TxType"}, "memberName": "Transfer"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "sigHash", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "getSigHash"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "signer", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ecrecover"}, "arguments": [{"type": "Identifier", "name": "sigHash"}, {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "v"}, {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "r"}, {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "s"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "owner"}, "right": {"type": "Identifier", "name": "signer"}}], "names": []}}]}, "FalseBody": {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "TxType"}, "memberName": "SpendCond"}}, "TrueBody": {"type": "Block", "statements": []}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "revert"}, "arguments": [{"type": "StringLiteral", "value": "unknown tx type"}], "names": []}}]}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "txn"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "parseTx"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "utxoId"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "outpoint"}, "memberName": "hash"}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "txType"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "TxType"}, "memberName": "Deposit"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Deposit"}, "name": "deposit", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "deposits"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "amount"}, "right": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "outs"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "memberName": "value"}}, {"type": "StringLiteral", "value": "value mismatch"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "owner"}, "right": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "outs"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "memberName": "owner"}}, {"type": "StringLiteral", "value": "owner mismatch"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}, "right": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "outs"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "memberName": "color"}}, {"type": "StringLiteral", "value": "color mismatch"}], "names": []}}, {"type": "IfStatement", "condition": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "isNST"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "deposit"}, "memberName": "color"}], "names": []}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokenData"}, "index": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}, "right": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "txn"}, "memberName": "outs"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "memberName": "stateRoot"}}, {"type": "StringLiteral", "value": "data mismatch"}], "names": []}}]}, "FalseBody": null}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "revert"}, "arguments": [{"type": "StringLiteral", "value": "unexpected tx type"}], "names": []}}]}}]}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "exit not found"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "UnaryOperation", "operator": "!", "subExpression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "finalized"}, "isPrefix": true}, {"type": "StringLiteral", "value": "The exit has already been finalized"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "memberName": "transfer"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "stake"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "isPrefix": true}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "challengeYoungestInput", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_youngerInputProof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_exitingTxProof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_outputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_inputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "challenger", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "challenger"}}, {"type": "StringLiteral", "value": "Wrong challenger"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "txData", "storageLocation": "memory"}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "txHash"}, {"type": "Identifier", "name": "txData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "32", "subdenomination": null}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_youngerInputProof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}}, "right": {"type": "NumberLiteral", "number": "96", "subdenomination": null}}, {"type": "Identifier", "name": "_exitingTxProof"}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "BinaryOperation", "operator": "|", "left": {"type": "BinaryOperation", "operator": "<<", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "_outputIndex"}], "names": []}, "right": {"type": "NumberLiteral", "number": "120", "subdenomination": null}}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint120"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "txHash"}], "names": []}], "names": []}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "amount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "There is no exit for this UTXO"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxLib.Tx"}, "name": "exitingTx", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "parseTx"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "txHash"}, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "NumberLiteral", "number": "128", "subdenomination": null}, {"type": "Identifier", "name": "_youngerInputProof"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "txHash"}, "right": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "exitingTx"}, "memberName": "ins"}, "index": {"type": "Identifier", "name": "_inputIndex"}}, "memberName": "outpoint"}, "memberName": "hash"}}, {"type": "StringLiteral", "value": "Given output is not referenced in exiting tx"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "youngerInputTimestamp", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "Identifier", "name": "youngerInputTimestamp"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "periods"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_youngerInputProof"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "youngerInputTimestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The referenced period was not submitted to bridge"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "priorityTimestamp"}, "right": {"type": "Identifier", "name": "youngerInputTimestamp"}}, {"type": "StringLiteral", "value": "Challenged input should be older"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "memberName": "transfer"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "memberName": "stake"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "delete", "subExpression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "exits"}, "index": {"type": "Identifier", "name": "utxoId"}}, "isPrefix": true}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getNextExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "exitableAt", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "priority", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "tokens"}, "index": {"type": "Identifier", "name": "_color"}}, "memberName": "getMin"}, "arguments": [], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "utxoId"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "Identifier", "name": "priority"}], "names": []}], "names": []}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "exitableAt"}, "right": {"type": "BinaryOperation", "operator": ">>", "left": {"type": "Identifier", "name": "priority"}, "right": {"type": "NumberLiteral", "number": "192", "subdenomination": null}}}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "isNft", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "BinaryOperation", "operator": "&&", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "_color"}, "right": {"type": "Identifier", "name": "NFT_FIRST_COLOR"}}], "isArray": false}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "_color"}, "right": {"type": "Identifier", "name": "NST_FIRST_COLOR"}}], "isArray": false}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "isNST", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint16"}, "name": "_color", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "Identifier", "name": "_color"}, "right": {"type": "Identifier", "name": "NST_FIRST_COLOR"}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "pure"}, {"type": "FunctionDefinition", "name": "getERC20ExitPriority", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "timestamp", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint64"}, "name": "txPos", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "priority", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "exitableAt", "storageLocation": null}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "Math"}, "memberName": "max"}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "Identifier", "name": "timestamp"}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "2", "subdenomination": null}, "right": {"type": "Identifier", "name": "exitDuration"}}], "isArray": false}}, {"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "block"}, "memberName": "timestamp"}, "right": {"type": "Identifier", "name": "exitDuration"}}], "names": []}}, {"type": "BinaryOperation", "operator": "|", "left": {"type": "BinaryOperation", "operator": "|", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "<<", "left": {"type": "Identifier", "name": "exitableAt"}, "right": {"type": "NumberLiteral", "number": "192", "subdenomination": null}}], "isArray": false}, "right": {"type": "BinaryOperation", "operator": "<<", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "txPos"}], "names": []}, "right": {"type": "NumberLiteral", "number": "128", "subdenomination": null}}}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "utxoId"}], "names": []}], "names": []}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint256"}, "length": {"type": "NumberLiteral", "number": "49", "subdenomination": null}}, "name": "______gap", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "FastExitHandler", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "ExitHandler"}, "arguments": []}], "subNodes": [{"type": "StructDefinition", "name": "Data", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint32"}, "name": "timestamp", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "txHash", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint64"}, "name": "txPos", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "utxoId", "storageLocation": null}]}, {"type": "FunctionDefinition", "name": "startBoughtExit", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_youngestInputProof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "_proof", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_outputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "_inputIndex", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "length": null}, "name": "signedData", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "Identifier", "name": "exitStake"}}, {"type": "StringLiteral", "value": "Not enough ether sent to pay for exit stake"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Data"}, "name": "data", "storageLocation": "memory"}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "timestamp"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "periods"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_proof"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "timestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The referenced period was not submitted to bridge"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [null, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "timestamp"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "bridge"}, "memberName": "periods"}, "arguments": [{"type": "IndexAccess", "base": {"type": "Identifier", "name": "_youngestInputProof"}, "index": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "timestamp"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "StringLiteral", "value": "The referenced period was not submitted to bridge"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes"}, "name": "txData", "storageLocation": "memory"}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "txPos"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "txHash"}, {"type": "Identifier", "name": "txData"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "validateProof"}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "32", "subdenomination": null}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "_youngestInputProof"}, "memberName": "length"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}}, "right": {"type": "NumberLiteral", "number": "96", "subdenomination": null}}, {"type": "Identifier", "name": "_proof"}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxLib.Tx"}, "name": "exitingTx", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "TxLib"}, "memberName": "parseTx"}, "arguments": [{"type": "Identifier", "name": "txData"}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "TxLib.Output"}, "name": "out", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "exitingTx"}, "memberName": "outs"}, "index": {"type": "Identifier", "name": "_outputIndex"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "utxoId"}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "BinaryOperation", "operator": "|", "left": {"type": "BinaryOperation", "operator": "<<", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "Identifier", "name": "_outputIndex"}], "names": []}, "right": {"type": "NumberLiteral", "number": "120", "subdenomination": null}}, "right": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint120"}}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "data"}, "memberName": "txHash"}], "names": []}], "names": []}}], "names": []}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "name": "buyPrice", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "isStateVar": false, "isIndexed": false, "decl": 