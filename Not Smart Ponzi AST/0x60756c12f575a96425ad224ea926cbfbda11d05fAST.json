{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.5.9"}, {"type": "ContractDefinition", "name": "ERC20", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "totalSupply", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "supply", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "balanceOf", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "balance", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "transfer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "success", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "transferFrom", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_from", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_to", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "success", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "approve", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_value", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "success", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "allowance", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_spender", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "remaining", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "decimals", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "digits", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "EventDefinition", "name": "Approval", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_spender", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "_value", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}], "kind": "interface"}, {"type": "ContractDefinition", "name": "OtcInterface", "baseContracts": [], "subNodes": [{"type": "FunctionDefinition", "name": "getOffer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "id", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getBestOffer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "sellGem", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "buyGem", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getWorseOffer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "id", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "take", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "id", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}, "name": "maxTakeAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "WethInterface", "baseContracts": [{"type": "InheritanceSpecifier", "baseName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "arguments": []}], "subNodes": [{"type": "FunctionDefinition", "name": "deposit", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": [], "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "withdraw", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": [], "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}], "kind": "contract"}, {"type": "ContractDefinition", "name": "TradeEth2DAI", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "admin", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "INVALID_ID", "expression": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint"}}, "arguments": [{"type": "UnaryOperation", "operator": "-", "subExpression": {"type": "NumberLiteral", "number": "1", "subdenomination": null}, "isPrefix": true}], "names": []}, "visibility": "default", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint"}}, "arguments": [{"type": "UnaryOperation", "operator": "-", "subExpression": {"type": "NumberLiteral", "number": "1", "subdenomination": null}, "isPrefix": true}], "names": []}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "COMMON_DECIMALS", "expression": {"type": "NumberLiteral", "number": "18", "subdenomination": null}, "visibility": "internal", "isStateVar": true, "isDeclaredConst": true, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "18", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "OtcInterface"}, "name": "otc", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "OtcInterface"}, "arguments": [{"type": "NumberLiteral", "number": "0x39755357759cE0d7f32dC8dC45414CCa409AE24e", "subdenomination": null}], "names": []}, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "OtcInterface"}, "arguments": [{"type": "NumberLiteral", "number": "0x39755357759cE0d7f32dC8dC45414CCa409AE24e", "subdenomination": null}], "names": []}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "WethInterface"}, "name": "wethToken", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "WethInterface"}, "arguments": [{"type": "NumberLiteral", "number": "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2", "subdenomination": null}], "names": []}, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "WethInterface"}, "arguments": [{"type": "NumberLiteral", "number": "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2", "subdenomination": null}], "names": []}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "DAIToken", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ERC20"}, "arguments": [{"type": "NumberLiteral", "number": "0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359", "subdenomination": null}], "names": []}, "visibility": "default", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ERC20"}, "arguments": [{"type": "NumberLiteral", "number": "0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359", "subdenomination": null}], "names": []}}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "wethToken"}, "memberName": "decimals"}, "arguments": [], "names": []}, "right": {"type": "Identifier", "name": "COMMON_DECIMALS"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "admin"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "DAIToken"}, "memberName": "approve"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "otc"}], "names": []}, {"type": "BinaryOperation", "operator": "**", "left": {"type": "NumberLiteral", "number": "2", "subdenomination": null}, "right": {"type": "NumberLiteral", "number": "255", "subdenomination": null}}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "wethToken"}, "memberName": "approve"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "otc"}], "names": []}, {"type": "BinaryOperation", "operator": "**", "left": {"type": "NumberLiteral", "number": "2", "subdenomination": null}, "right": {"type": "NumberLiteral", "number": "255", "subdenomination": null}}], "names": []}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": []}, "visibility": "external", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "EventDefinition", "name": "TradeExecute", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "sender", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isEthToDai", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "srcAmount", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "destAmount", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "destAddress", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "FunctionDefinition", "name": "tradeEthVsDAI", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "numTakeOrders", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "numTraverseOrders", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isEthToDai", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "srcAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "dstAddress", "storageLocation": null}], "initialValue": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "userTotalDestAmount", "storageLocation": null}], "initialValue": null}, {"type": "IfStatement", "condition": {"type": "Identifier", "name": "isEthToDai"}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "Identifier", "name": "srcAmount"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "wethToken"}, "memberName": "deposit"}, "memberName": "value"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}], "names": []}, "arguments": [], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "userTotalDestAmount"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "takeOrders"}, "arguments": [{"type": "Identifier", "name": "wethToken"}, {"type": "Identifier", "name": "DAIToken"}, {"type": "Identifier", "name": "srcAmount"}, {"type": "Identifier", "name": "numTakeOrders"}, {"type": "Identifier", "name": "numTraverseOrders"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "DAIToken"}, "memberName": "transfer"}, "arguments": [{"type": "Identifier", "name": "dstAddress"}, {"type": "Identifier", "name": "userTotalDestAmount"}], "names": []}], "names": []}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "DAIToken"}, "memberName": "transferFrom"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "address"}}, "arguments": [{"type": "Identifier", "name": "this"}], "names": []}, {"type": "Identifier", "name": "srcAmount"}], "names": []}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "userTotalDestAmount"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "takeOrders"}, "arguments": [{"type": "Identifier", "name": "DAIToken"}, {"type": "Identifier", "name": "wethToken"}, {"type": "Identifier", "name": "srcAmount"}, {"type": "Identifier", "name": "numTakeOrders"}, {"type": "Identifier", "name": "numTraverseOrders"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "wethToken"}, "memberName": "withdraw"}, "arguments": [{"type": "Identifier", "name": "userTotalDestAmount"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "dstAddress"}, "memberName": "transfer"}, "arguments": [{"type": "Identifier", "name": "userTotalDestAmount"}], "names": []}}]}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "TradeExecute"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "isEthToDai"}, {"type": "Identifier", "name": "srcAmount"}, {"type": "Identifier", "name": "userTotalDestAmount"}, {"type": "Identifier", "name": "dstAddress"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "getNextOffer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "prevOfferId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isEthToDai", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerPayAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerBuyAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "prevId", "storageLocation": null}], "initialValue": {"type": "Conditional", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "prevOfferId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueExpression": {"type": "Identifier", "name": "INVALID_ID"}, "FalseExpression": {"type": "Identifier", "name": "prevOfferId"}}}, {"type": "IfStatement", "condition": {"type": "Identifier", "name": "isEthToDai"}, "TrueBody": {"type": "Block", "statements": [{"type": "TupleExpression", "components": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextBestOffer"}, "arguments": [{"type": "Identifier", "name": "DAIToken"}, {"type": "Identifier", "name": "wethToken"}, {"type": "NumberLiteral", "number": "1", "subdenomination": null}, {"type": "Identifier", "name": "prevId"}], "names": []}], "isArray": false}]}, "FalseBody": null}, {"type": "TupleExpression", "components": [{"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextBestOffer"}, "arguments": [{"type": "Identifier", "name": "wethToken"}, {"type": "Identifier", "name": "DAIToken"}, {"type": "NumberLiteral", "number": "1", "subdenomination": null}, {"type": "Identifier", "name": "prevId"}], "names": []}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "takeOrders", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "srcToken", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "dstToken", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "srcAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "numTakeOrders", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "numTraverseOrders", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "userTotalDestAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "remainingAmount", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "srcAmount"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "destAmount", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerId", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "INVALID_ID"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "numTraverseOrders"}}}, "conditionExpression": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "--", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerId"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextBestOffer"}, "arguments": [{"type": "Identifier", "name": "dstToken"}, {"type": "Identifier", "name": "srcToken"}, {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "remainingAmount"}, "right": {"type": "Identifier", "name": "i"}}, {"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}]}}, {"type": "ForStatement", "initExpression": {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "numTakeOrders"}}}, "conditionExpression": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "--", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerId"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextBestOffer"}, "arguments": [{"type": "Identifier", "name": "dstToken"}, {"type": "Identifier", "name": "srcToken"}, {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "remainingAmount"}, "right": {"type": "Identifier", "name": "i"}}, {"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "destAmount"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "takeMatchingOffer"}, "arguments": [{"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "remainingAmount"}, "right": {"type": "Identifier", "name": "i"}}, {"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "+=", "left": {"type": "Identifier", "name": "userTotalDestAmount"}, "right": {"type": "Identifier", "name": "destAmount"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "-=", "left": {"type": "Identifier", "name": "remainingAmount"}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "remainingAmount"}, "right": {"type": "Identifier", "name": "i"}}], "isArray": false}}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getNextBestOffer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "offerSellGem", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "offerBuyGem", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "payAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "prevOfferId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerId", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerPayAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerBuyAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "prevOfferId"}, "right": {"type": "Identifier", "name": "INVALID_ID"}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "getBestOffer"}, "arguments": [{"type": "Identifier", "name": "offerSellGem"}, {"type": "Identifier", "name": "offerBuyGem"}], "names": []}}}]}, "FalseBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "getWorseOffer"}, "arguments": [{"type": "Identifier", "name": "prevOfferId"}], "names": []}}}]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerPayAmount"}, null, {"type": "Identifier", "name": "offerBuyAmount"}, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "getOffer"}, "arguments": [{"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "WhileStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "payAmount"}, "right": {"type": "Identifier", "name": "offerBuyAmount"}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "getWorseOffer"}, "arguments": [{"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerPayAmount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerBuyAmount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, ";"]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerPayAmount"}, null, {"type": "Identifier", "name": "offerBuyAmount"}, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "getOffer"}, "arguments": [{"type": "Identifier", "name": "offerId"}], "names": []}}}]}}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "takeMatchingOffer", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "srcAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerId", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "actualDestAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerPayAmt", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerBuyAmt", "storageLocation": null}], "initialValue": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerPayAmt"}, null, {"type": "Identifier", "name": "offerBuyAmt"}, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "getOffer"}, "arguments": [{"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "actualDestAmount"}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "srcAmount"}, "right": {"type": "Identifier", "name": "offerPayAmt"}}, "right": {"type": "Identifier", "name": "offerBuyAmt"}}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "Identifier", "name": "actualDestAmount"}], "names": []}, "right": {"type": "Identifier", "name": "actualDestAmount"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "otc"}, "memberName": "take"}, "arguments": [{"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}}, "arguments": [{"type": "Identifier", "name": "offerId"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "ElementaryTypeNameExpression", "typeName": {"type": "ElementaryTypeName", "name": "uint128"}}, "arguments": [{"type": "Identifier", "name": "actualDestAmount"}], "names": []}], "names": []}}, {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "actualDestAmount"}], "isArray": false}]}, "visibility": "internal", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getOrdersSellAmountInTokens", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bool"}, "name": "isEthToDai", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "firstOrderToCheck", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "numOrders", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint"}, "length": null}, "name": "offerPayAmtTokens", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint"}, "length": null}, "name": "offerBuyAmtTokens", "storageLocation": "memory", "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerId", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "INVALID_ID"}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "i", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "srcToken", "storageLocation": null}], "initialValue": {"type": "Conditional", "condition": {"type": "Identifier", "name": "isEthToDai"}, "TrueExpression": {"type": "Identifier", "name": "wethToken"}, "FalseExpression": {"type": "Identifier", "name": "DAIToken"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "ERC20"}, "name": "dstToken", "storageLocation": null}], "initialValue": {"type": "Conditional", "condition": {"type": "Identifier", "name": "isEthToDai"}, "TrueExpression": {"type": "Identifier", "name": "DAIToken"}, "FalseExpression": {"type": "Identifier", "name": "wethToken"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerPayAmtTokens"}, "right": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint"}, "length": null}}, "arguments": [{"type": "Identifier", "name": "numOrders"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "offerBuyAmtTokens"}, "right": {"type": "FunctionCall", "expression": {"type": "NewExpression", "typeName": {"type": "ArrayTypeName", "baseTypeName": {"type": "ElementaryTypeName", "name": "uint"}, "length": null}}, "arguments": [{"type": "Identifier", "name": "numOrders"}], "names": []}}}, {"type": "ForStatement", "initExpression": {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "firstOrderToCheck"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerId"}, null, null], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextBestOffer"}, "arguments": [{"type": "Identifier", "name": "dstToken"}, {"type": "Identifier", "name": "srcToken"}, {"type": "NumberLiteral", "number": "1", "subdenomination": null}, {"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerBuyAmtTokens"}, {"type": "Identifier", "name": "offerPayAmtTokens"}], "isArray": false}, "FalseBody": null}]}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerBuyAmt", "storageLocation": null}], "initialValue": null}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint"}, "name": "offerPayAmt", "storageLocation": null}], "initialValue": null}, {"type": "ForStatement", "initExpression": {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}}, "conditionExpression": {"type": "BinaryOperation", "operator": "<", "left": {"type": "Identifier", "name": "i"}, "right": {"type": "Identifier", "name": "numOrders"}}, "loopExpression": {"type": "ExpressionStatement", "expression": {"type": "UnaryOperation", "operator": "++", "subExpression": {"type": "Identifier", "name": "i"}, "isPrefix": false}}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerId"}, {"type": "Identifier", "name": "offerPayAmt"}, {"type": "Identifier", "name": "offerBuyAmt"}], "isArray": false}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "getNextBestOffer"}, "arguments": [{"type": "Identifier", "name": "dstToken"}, {"type": "Identifier", "name": "srcToken"}, {"type": "NumberLiteral", "number": "1", "subdenomination": null}, {"type": "Identifier", "name": "offerId"}], "names": []}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "offerBuyAmtTokens"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "offerBuyAmt"}, "right": {"type": "BinaryOperation", "operator": "**", "left": {"type": "NumberLiteral", "number": "10", "subdenomination": null}, "right": {"type": "NumberLiteral", "number": "18", "subdenomination": null}}}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "offerPayAmtTokens"}, "index": {"type": "Identifier", "name": "i"}}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "Identifier", "name": "offerPayAmt"}, "right": {"type": "BinaryOperation", "operator": "**", "left": {"type": "NumberLiteral", "number": "10", "subdenomination": null}, "right": {"type": "NumberLiteral", "number": "18", "subdenomination": null}}}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "==", "left": {"type": "Identifier", "name": "offerId"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerBuyAmtTokens"}, {"type": "Identifier", "name": "offerPayAmtTokens"}], "isArray": false}, "FalseBody": null}]}}, {"type": "TupleExpression", "components": [{"type": "Identifier", "name": "offerBuyAmtTokens"}, {"type": "Identifier", "name": "offerPayAmtTokens"}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}], "kind": "contract"}]}