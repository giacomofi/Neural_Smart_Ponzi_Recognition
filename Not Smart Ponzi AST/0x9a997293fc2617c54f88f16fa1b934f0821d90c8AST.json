{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.6.4"}, {"type": "ContractDefinition", "name": "Oasisosc", "baseContracts": [], "subNodes": [{"type": "EventDefinition", "name": "StorageEvent", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "from", "isStateVar": false, "isIndexed": true}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digestO", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digestQ", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "DestroyEvent", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "from", "isStateVar": false, "isIndexed": true}]}, "isAnonymous": false}, {"type": "StructDefinition", "name": "Multihash", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "hashFunction", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "size", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digest", "storageLocation": null}]}, {"type": "StructDefinition", "name": "OSC", "members": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address", "stateMutability": "payable"}, "name": "owner_addr", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Multihash"}, "name": "ontology", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Multihash"}, "name": "query", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "previous_v", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "OSC"}, "name": "osc", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "hashO", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "sizeO", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digestO", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "hashQ", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "sizeQ", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digestQ", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_prev", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "osc"}, "right": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "OSC"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Multihash"}, "arguments": [{"type": "Identifier", "name": "hashO"}, {"type": "Identifier", "name": "sizeO"}, {"type": "Identifier", "name": "digestO"}], "names": []}, {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Multihash"}, "arguments": [{"type": "Identifier", "name": "hashQ"}, {"type": "Identifier", "name": "sizeQ"}, {"type": "Identifier", "name": "digestQ"}], "names": []}, {"type": "Identifier", "name": "_prev"}], "names": []}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "StorageEvent"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "digestO"}, {"type": "Identifier", "name": "digestQ"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "FunctionDefinition", "name": "getOntology", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "hashO", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "sizeO", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digestO", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "TupleExpression", "components": [{"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "ontology"}, "memberName": "hashFunction"}, {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "ontology"}, "memberName": "size"}, {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "ontology"}, "memberName": "digest"}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getSPARQLQuery", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "hashQ", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint8"}, "name": "sizeQ", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "digestQ", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "TupleExpression", "components": [{"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "query"}, "memberName": "hashFunction"}, {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "query"}, "memberName": "size"}, {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "query"}, "memberName": "digest"}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getOwner", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "owner_addr"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "getPreviousVersion", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": null, "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "previous_v"}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "ModifierDefinition", "name": "owner_allowed", "parameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "osc"}, "memberName": "owner_addr"}}, {"type": "StringLiteral", "value": "Only contract owner is allowed to call this function"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "FunctionDefinition", "name": "destroy", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "DestroyEvent"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "selfdestruct"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "owner_allowed", "arguments": []}], "isConstructor": false, "stateMutability": null}], "kind": "contract"}]}