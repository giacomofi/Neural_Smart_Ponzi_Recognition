{"type": "SourceUnit", "children": [{"type": "PragmaDirective", "name": "solidity", "value": "^0.4.26"}, {"type": "ContractDefinition", "name": "FiatDex_protocol_v1", "baseContracts": [], "subNodes": [{"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "owner", "expression": null, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "feeDelay", "expression": {"type": "NumberLiteral", "number": "7", "subdenomination": null}, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "7", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "dailyFeeIncrease", "expression": {"type": "NumberLiteral", "number": "1000", "subdenomination": null}, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "1000", "subdenomination": null}}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "version", "expression": {"type": "NumberLiteral", "number": "1", "subdenomination": null}, "visibility": "public", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": {"type": "NumberLiteral", "number": "1", "subdenomination": null}}, {"type": "FunctionDefinition", "name": null, "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": null, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "owner"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}}}]}, "visibility": "public", "modifiers": [], "isConstructor": true, "stateMutability": null}, {"type": "EnumDefinition", "name": "States", "members": [{"type": "EnumValue", "name": "NOTOPEN"}, {"type": "EnumValue", "name": "INITIALIZED"}, {"type": "EnumValue", "name": "ACTIVE"}, {"type": "EnumValue", "name": "CLOSED"}]}, {"type": "StructDefinition", "name": "Swap", "members": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "States"}, "name": "swapState", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "sendAmount", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "fiatTrader", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "ethTrader", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "openTime", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "ethTraderCollateral", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "fiatTraderCollateral", "storageLocation": null}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "feeAmount", "storageLocation": null}]}, {"type": "StateVariableDeclaration", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "Mapping", "keyType": {"type": "ElementaryTypeName", "name": "bytes32"}, "valueType": {"type": "UserDefinedTypeName", "namePath": "Swap"}}, "name": "swaps", "expression": null, "visibility": "private", "isStateVar": true, "isDeclaredConst": false, "isIndexed": false}], "initialValue": null}, {"type": "EventDefinition", "name": "Open", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_fiatTrader", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_sendAmount", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "Close", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "isStateVar": false, "isIndexed": false}, {"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_fee", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "EventDefinition", "name": "ChangedOwnership", "parameters": {"type": "ParameterList", "parameters": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_newOwner", "isStateVar": false, "isIndexed": false}]}, "isAnonymous": false}, {"type": "ModifierDefinition", "name": "onlyNotOpenSwaps", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}, "memberName": "swapState"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "NOTOPEN"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "ModifierDefinition", "name": "onlyInitializedSwaps", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}, "memberName": "swapState"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "INITIALIZED"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "ModifierDefinition", "name": "onlyActiveSwaps", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}, "memberName": "swapState"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "ACTIVE"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "Identifier", "name": "_"}}]}}, {"type": "FunctionDefinition", "name": "viewSwap", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "UserDefinedTypeName", "namePath": "States"}, "name": "swapState", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "sendAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "ethTrader", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "fiatTrader", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "openTime", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "ethTraderCollateral", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "fiatTraderCollateral", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "feeAmount", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Swap"}, "name": "swap", "storageLocation": "memory"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}}, {"type": "TupleExpression", "components": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "swapState"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "sendAmount"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTrader"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "fiatTrader"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "openTime"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTraderCollateral"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "fiatTraderCollateral"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "feeAmount"}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "viewFiatDexSpecs", "parameters": {"type": "ParameterList", "parameters": []}, "returnParameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_version", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_owner", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_feeDelay", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_dailyFeeIncrease", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "body": {"type": "Block", "statements": [{"type": "TupleExpression", "components": [{"type": "Identifier", "name": "version"}, {"type": "Identifier", "name": "owner"}, {"type": "Identifier", "name": "feeDelay"}, {"type": "Identifier", "name": "dailyFeeIncrease"}], "isArray": false}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": "view"}, {"type": "FunctionDefinition", "name": "changeContractOwner", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_newOwner", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "Identifier", "name": "owner"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "owner"}, "right": {"type": "Identifier", "name": "_newOwner"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "ChangedOwnership"}, "arguments": [{"type": "Identifier", "name": "_newOwner"}], "names": []}}]}, "visibility": "public", "modifiers": [], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "openSwap", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}, {"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "address"}, "name": "_fiatTrader", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_sendAmount", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "*", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "isArray": false}, "right": {"type": "NumberLiteral", "number": "5", "subdenomination": null}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "_sendAmount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}], "names": []}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "_ethTraderCollateral", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "Identifier", "name": "_sendAmount"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Swap"}, "name": "swap", "storageLocation": "memory"}], "initialValue": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Swap"}, "arguments": [{"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "INITIALIZED"}, {"type": "Identifier", "name": "_sendAmount"}, {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, {"type": "Identifier", "name": "_fiatTrader"}, {"type": "Identifier", "name": "now"}, {"type": "Identifier", "name": "_ethTraderCollateral"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": ["swapState", "sendAmount", "ethTrader", "fiatTrader", "openTime", "ethTraderCollateral", "fiatTraderCollateral", "feeAmount"]}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}, "right": {"type": "Identifier", "name": "swap"}}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Open"}, "arguments": [{"type": "Identifier", "name": "_tradeID"}, {"type": "Identifier", "name": "_fiatTrader"}, {"type": "Identifier", "name": "_sendAmount"}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "onlyNotOpenSwaps", "arguments": [{"type": "Identifier", "name": "_tradeID"}]}], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "addFiatTraderCollateral", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Swap"}, "name": "swap", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": ">=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTraderCollateral"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "fiatTrader"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "fiatTraderCollateral"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "value"}}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "swapState"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "ACTIVE"}}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "onlyInitializedSwaps", "arguments": [{"type": "Identifier", "name": "_tradeID"}]}], "isConstructor": false, "stateMutability": "payable"}, {"type": "FunctionDefinition", "name": "refundSwap", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Swap"}, "name": "swap", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTrader"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "swapState"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "CLOSED"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTrader"}, "memberName": "transfer"}, "arguments": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "sendAmount"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTraderCollateral"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Close"}, "arguments": [{"type": "Identifier", "name": "_tradeID"}, {"type": "NumberLiteral", "number": "0", "subdenomination": null}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "onlyInitializedSwaps", "arguments": [{"type": "Identifier", "name": "_tradeID"}]}], "isConstructor": false, "stateMutability": null}, {"type": "FunctionDefinition", "name": "closeSwap", "parameters": {"type": "ParameterList", "parameters": [{"type": "Parameter", "typeName": {"type": "ElementaryTypeName", "name": "bytes32"}, "name": "_tradeID", "storageLocation": null, "isStateVar": false, "isIndexed": false}]}, "returnParameters": [], "body": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "UserDefinedTypeName", "namePath": "Swap"}, "name": "swap", "storageLocation": "storage"}], "initialValue": {"type": "IndexAccess", "base": {"type": "Identifier", "name": "swaps"}, "index": {"type": "Identifier", "name": "_tradeID"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "require"}, "arguments": [{"type": "BinaryOperation", "operator": "==", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "msg"}, "memberName": "sender"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTrader"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "swapState"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "States"}, "memberName": "CLOSED"}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "feeAmount", "storageLocation": null}], "initialValue": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "currentTime", "storageLocation": null}], "initialValue": {"type": "Identifier", "name": "now"}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": "<", "left": {"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "openTime"}, "right": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "86400", "subdenomination": null}, "right": {"type": "Identifier", "name": "feeDelay"}}}, "right": {"type": "Identifier", "name": "currentTime"}}, "TrueBody": {"type": "Block", "statements": [{"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "seconds_over", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "-", "left": {"type": "Identifier", "name": "currentTime"}, "right": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "openTime"}, "right": {"type": "BinaryOperation", "operator": "*", "left": {"type": "NumberLiteral", "number": "86400", "subdenomination": null}, "right": {"type": "Identifier", "name": "feeDelay"}}}], "isArray": false}}}, {"type": "VariableDeclarationStatement", "variables": [{"type": "VariableDeclaration", "typeName": {"type": "ElementaryTypeName", "name": "uint256"}, "name": "feePercent", "storageLocation": null}], "initialValue": {"type": "BinaryOperation", "operator": "/", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "dailyFeeIncrease"}, "right": {"type": "Identifier", "name": "seconds_over"}}], "isArray": false}, "right": {"type": "NumberLiteral", "number": "86400", "subdenomination": null}}}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "feePercent"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "feePercent"}, "right": {"type": "NumberLiteral", "number": "99000", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "feePercent"}, "right": {"type": "NumberLiteral", "number": "99000", "subdenomination": null}}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "Identifier", "name": "feeAmount"}, "right": {"type": "BinaryOperation", "operator": "/", "left": {"type": "TupleExpression", "components": [{"type": "BinaryOperation", "operator": "*", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTraderCollateral"}, "right": {"type": "Identifier", "name": "feePercent"}}], "isArray": false}, "right": {"type": "NumberLiteral", "number": "100000", "subdenomination": null}}}}]}, "FalseBody": null}]}, "FalseBody": null}, {"type": "IfStatement", "condition": {"type": "BinaryOperation", "operator": ">", "left": {"type": "Identifier", "name": "feeAmount"}, "right": {"type": "NumberLiteral", "number": "0", "subdenomination": null}}, "TrueBody": {"type": "Block", "statements": [{"type": "ExpressionStatement", "expression": {"type": "BinaryOperation", "operator": "=", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "feeAmount"}, "right": {"type": "Identifier", "name": "feeAmount"}}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "owner"}, "memberName": "transfer"}, "arguments": [{"type": "BinaryOperation", "operator": "*", "left": {"type": "Identifier", "name": "feeAmount"}, "right": {"type": "NumberLiteral", "number": "2", "subdenomination": null}}], "names": []}}]}, "FalseBody": null}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTrader"}, "memberName": "transfer"}, "arguments": [{"type": "BinaryOperation", "operator": "-", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "ethTraderCollateral"}, "right": {"type": "Identifier", "name": "feeAmount"}}], "names": []}}, {"type": "ExpressionStatement", "expression": {"type": "FunctionCall", "expression": {"type": "MemberAccess", "expression": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "fiatTrader"}, "memberName": "transfer"}, "arguments": [{"type": "BinaryOperation", "operator": "-", "left": {"type": "BinaryOperation", "operator": "+", "left": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "sendAmount"}, "right": {"type": "MemberAccess", "expression": {"type": "Identifier", "name": "swap"}, "memberName": "fiatTraderCollateral"}}, "right": {"type": "Identifier", "name": "feeAmount"}}], "names": []}}, {"type": "EmitStatement", "eventCall": {"type": "FunctionCall", "expression": {"type": "Identifier", "name": "Close"}, "arguments": [{"type": "Identifier", "name": "_tradeID"}, {"type": "Identifier", "name": "feeAmount"}], "names": []}}]}, "visibility": "public", "modifiers": [{"type": "ModifierInvocation", "name": "onlyActiveSwaps", "arguments": [{"type": "Identifier", "name": "_tradeID"}]}], "isConstructor": false, "stateMutability": null}], "kind": "contract"}]}